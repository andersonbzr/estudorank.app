{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/lib/supabase/client.ts"],"sourcesContent":["// src/lib/supabase/client.ts\r\nimport { createClient, type SupabaseClient } from \"@supabase/supabase-js\";\r\n\r\nlet _client: SupabaseClient | null = null;\r\n\r\n/**\r\n * Cliente do Supabase para uso no browser (componentes client).\r\n * Usa storageKey custom \"sr-auth\" para evitar conflitos e manter sessão.\r\n */\r\nexport function supabaseBrowser(): SupabaseClient {\r\n  if (_client) return _client;\r\n\r\n  const url = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\n  const anon = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\r\n\r\n  if (!url || !anon) {\r\n    throw new Error(\r\n      \"Env vars ausentes: defina NEXT_PUBLIC_SUPABASE_URL e NEXT_PUBLIC_SUPABASE_ANON_KEY.\"\r\n    );\r\n  }\r\n\r\n  _client = createClient(url, anon, {\r\n    auth: {\r\n      persistSession: true,\r\n      autoRefreshToken: true,\r\n      storageKey: \"sr-auth\",\r\n    },\r\n  });\r\n\r\n  return _client;\r\n}\r\n"],"names":[],"mappings":"AAAA,6BAA6B;;;;;AAC7B;;AAEA,IAAI,UAAiC;AAM9B,SAAS;IACd,IAAI,SAAS,OAAO;IAEpB,MAAM;IACN,MAAM;IAEN;;IAMA,UAAU,IAAA,uMAAY,EAAC,KAAK,MAAM;QAChC,MAAM;YACJ,gBAAgB;YAChB,kBAAkB;YAClB,YAAY;QACd;IACF;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/components/auth/ChangePasswordForm.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useMemo } from \"react\";\r\nimport { supabaseBrowser } from \"@/lib/supabase/client\";\r\nimport clsx from \"clsx\";\r\n\r\ntype Props = { className?: string };\r\n\r\nfunction scorePassword(pwd: string) {\r\n  let score = 0;\r\n  if (pwd.length >= 8) score++;\r\n  if (/[A-Z]/.test(pwd)) score++;\r\n  if (/[a-z]/.test(pwd)) score++;\r\n  if (/\\d/.test(pwd)) score++;\r\n  if (/[^A-Za-z0-9]/.test(pwd)) score++;\r\n  return Math.min(score, 5);\r\n}\r\n\r\nexport default function ChangePasswordForm({ className }: Props) {\r\n  const [oldPwd, setOldPwd] = useState(\"\");\r\n  const [newPwd, setNewPwd] = useState(\"\");\r\n  const [confirm, setConfirm] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [showOld, setShowOld] = useState(false);\r\n  const [showNew, setShowNew] = useState(false);\r\n  const [showConfirm, setShowConfirm] = useState(false);\r\n  const [msg, setMsg] = useState<{ type: \"success\" | \"error\" | null; text: string }>({ type: null, text: \"\" });\r\n\r\n  const strength = useMemo(() => scorePassword(newPwd), [newPwd]);\r\n  const strengthLabel = [\"Muito fraca\", \"Fraca\", \"Ok\", \"Forte\", \"Muito forte\"][Math.max(0, strength - 1)] ?? \"Muito fraca\";\r\n\r\n  const disabled =\r\n    loading ||\r\n    !oldPwd ||\r\n    !newPwd ||\r\n    !confirm ||\r\n    newPwd !== confirm ||\r\n    newPwd.length < 8;\r\n\r\n  async function handleChange() {\r\n    setMsg({ type: null, text: \"\" });\r\n\r\n    if (newPwd !== confirm) {\r\n      setMsg({ type: \"error\", text: \"As senhas não coincidem.\" });\r\n      return;\r\n    }\r\n    if (newPwd.length < 8) {\r\n      setMsg({ type: \"error\", text: \"A nova senha deve ter pelo menos 8 caracteres.\" });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const supabase = supabaseBrowser();\r\n\r\n      const { data: userData, error: getUserErr } = await supabase.auth.getUser();\r\n      if (getUserErr || !userData?.user?.email) {\r\n        setMsg({ type: \"error\", text: \"Sessão inválida. Faça login novamente.\" });\r\n        return;\r\n      }\r\n\r\n      // Reautentica com a senha atual\r\n      const { error: signInErr } = await supabase.auth.signInWithPassword({\r\n        email: userData.user.email,\r\n        password: oldPwd,\r\n      });\r\n      if (signInErr) {\r\n        setMsg({ type: \"error\", text: \"Senha atual incorreta.\" });\r\n        return;\r\n      }\r\n\r\n      // Atualiza a senha\r\n      const { error } = await supabase.auth.updateUser({ password: newPwd });\r\n      if (error) {\r\n        setMsg({ type: \"error\", text: \"Erro ao atualizar senha: \" + error.message });\r\n        return;\r\n      }\r\n\r\n      setMsg({ type: \"success\", text: \"Senha alterada com sucesso!\" });\r\n      setOldPwd(\"\"); setNewPwd(\"\"); setConfirm(\"\");\r\n    } catch (e: any) {\r\n      setMsg({ type: \"error\", text: \"Erro inesperado. Tente novamente.\" });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={clsx(\"w-full max-w-md space-y-4 p-6 rounded-2xl bg-zinc-900/60 border border-zinc-800\", className)}>\r\n      <h2 className=\"text-lg font-semibold\">Alterar senha</h2>\r\n\r\n      {/* Senha atual */}\r\n      <div className=\"space-y-1\">\r\n        <label className=\"text-sm opacity-80\">Senha atual</label>\r\n        <div className=\"flex items-center gap-2\">\r\n          <input\r\n            className=\"flex-1 rounded-xl bg-zinc-900 border border-zinc-800 px-3 py-2 outline-none focus:border-zinc-600\"\r\n            type={showOld ? \"text\" : \"password\"}\r\n            placeholder=\"Sua senha atual\"\r\n            value={oldPwd}\r\n            onChange={(e) => setOldPwd(e.target.value)}\r\n          />\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => setShowOld((s) => !s)}\r\n            className=\"text-sm px-2 py-2 rounded-lg border border-zinc-800 hover:bg-zinc-800/50\"\r\n          >\r\n            {showOld ? \"Ocultar\" : \"Mostrar\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Nova senha */}\r\n      <div className=\"space-y-1\">\r\n        <label className=\"text-sm opacity-80\">Nova senha</label>\r\n        <div className=\"flex items-center gap-2\">\r\n          <input\r\n            className=\"flex-1 rounded-xl bg-zinc-900 border border-zinc-800 px-3 py-2 outline-none focus:border-zinc-600\"\r\n            type={showNew ? \"text\" : \"password\"}\r\n            placeholder=\"Nova senha\"\r\n            value={newPwd}\r\n            onChange={(e) => setNewPwd(e.target.value)}\r\n          />\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => setShowNew((s) => !s)}\r\n            className=\"text-sm px-2 py-2 rounded-lg border border-zinc-800 hover:bg-zinc-800/50\"\r\n          >\r\n            {showNew ? \"Ocultar\" : \"Mostrar\"}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Medidor de força */}\r\n        <div className=\"mt-2\">\r\n          <div className=\"flex gap-1\">\r\n            {[1, 2, 3, 4, 5].map((n) => (\r\n              <div\r\n                key={n}\r\n                className={clsx(\"h-1 flex-1 rounded\", n <= strength ? \"bg-emerald-500\" : \"bg-zinc-800\")}\r\n              />\r\n            ))}\r\n          </div>\r\n          <p className=\"text-xs mt-1 opacity-70\">Força: {strengthLabel}</p>\r\n          <p className=\"text-xs opacity-60\">Use 8+ caracteres, misture letras, números e símbolos.</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Confirmar nova senha */}\r\n      <div className=\"space-y-1\">\r\n        <label className=\"text-sm opacity-80\">Confirmar nova senha</label>\r\n        <div className=\"flex items-center gap-2\">\r\n          <input\r\n            className=\"flex-1 rounded-xl bg-zinc-900 border border-zinc-800 px-3 py-2 outline-none focus:border-zinc-600\"\r\n            type={showConfirm ? \"text\" : \"password\"}\r\n            placeholder=\"Repita a nova senha\"\r\n            value={confirm}\r\n            onChange={(e) => setConfirm(e.target.value)}\r\n          />\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => setShowConfirm((s) => !s)}\r\n            className=\"text-sm px-2 py-2 rounded-lg border border-zinc-800 hover:bg-zinc-800/50\"\r\n          >\r\n            {showConfirm ? \"Ocultar\" : \"Mostrar\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Mensagens */}\r\n      {msg.type && (\r\n        <div\r\n          className={clsx(\r\n            \"text-sm rounded-xl px-3 py-2 border\",\r\n            msg.type === \"success\"\r\n              ? \"bg-emerald-500/10 border-emerald-600 text-emerald-300\"\r\n              : \"bg-rose-500/10 border-rose-600 text-rose-300\"\r\n          )}\r\n          role=\"status\"\r\n          aria-live=\"polite\"\r\n        >\r\n          {msg.text}\r\n        </div>\r\n      )}\r\n\r\n      {/* Ações */}\r\n      <button\r\n        type=\"button\"\r\n        onClick={handleChange}\r\n        disabled={disabled}\r\n        className={clsx(\r\n          \"w-full h-11 rounded-xl font-medium transition\",\r\n          disabled\r\n            ? \"bg-zinc-800 text-zinc-500 cursor-not-allowed\"\r\n            : \"bg-gradient-to-r from-emerald-500 to-indigo-500 text-white hover:opacity-90\"\r\n        )}\r\n      >\r\n        {loading ? \"Salvando...\" : \"Salvar nova senha\"}\r\n      </button>\r\n\r\n      <p className=\"text-xs opacity-60 text-center\">\r\n        Por segurança, podemos pedir sua senha atual para confirmar a alteração.\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 439, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/components/Sidebar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\nimport { Trophy, LayoutDashboard, Settings, ShieldCheck, Shield } from \"lucide-react\";\r\nimport Image from \"next/image\";\r\n\r\ntype Props = {\r\n  onNavigate?: () => void;\r\n  isAdmin?: boolean;\r\n};\r\n\r\nexport default function Sidebar({ onNavigate, isAdmin }: Props) {\r\n  const pathname = usePathname();\r\n\r\n  const items: { href: string; label: string; icon: any }[] = [\r\n    { href: \"/me\", label: \"Meu Painel\", icon: LayoutDashboard },\r\n    { href: \"/ranking\", label: \"Ranking\", icon: Trophy },\r\n    { href: \"/config\", label: \"Configurações\", icon: Settings },\r\n    // ⬇️ Novo item Segurança\r\n    { href: \"/me/security\", label: \"Segurança\", icon: Shield },\r\n  ];\r\n\r\n  if (isAdmin) {\r\n    items.push({ href: \"/admin/courses\", label: \"Administração\", icon: ShieldCheck });\r\n  }\r\n\r\n  return (\r\n    <aside className=\"h-screen sticky top-0 bg-[var(--surface)]/80 backdrop-blur-xl border-r border-white/10 flex flex-col\">\r\n      <div className=\"h-14 border-b border-white/10 px-4 flex items-center gap-2\">\r\n        <Link href=\"/\" className=\"flex items-center gap-2\" onClick={onNavigate}>\r\n          <Image src=\"/logo.png\" alt=\"EstudoRank\" width={28} height={28} className=\"rounded-sm\" priority />\r\n          <span className=\"font-semibold tracking-tight\">EstudoRank</span>\r\n        </Link>\r\n      </div>\r\n\r\n      <nav className=\"flex-1 p-2 space-y-1.5\">\r\n        {items.map(({ href, label, icon: Icon }) => {\r\n          const active = pathname === href || pathname.startsWith(`${href}/`);\r\n          return (\r\n            <Link\r\n              key={href}\r\n              href={href}\r\n              onClick={onNavigate}\r\n              className={[\r\n                \"group flex items-center gap-2 px-3 py-2 rounded-xl border transition\",\r\n                active ? \"bg-white/15 border-white/20\" : \"bg-white/5 hover:bg-white/10 border-white/10\",\r\n              ].join(\" \")}\r\n              aria-current={active ? \"page\" : undefined}\r\n            >\r\n              <Icon size={16} className=\"opacity-90\" />\r\n              <span className=\"text-sm\">{label}</span>\r\n            </Link>\r\n          );\r\n        })}\r\n      </nav>\r\n\r\n      <div className=\"px-3 py-3 text-xs opacity-60 border-t border-white/10\">\r\n        © {new Date().getFullYear()} EstudoRank\r\n      </div>\r\n    </aside>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AALA;;;;;;AAYe,SAAS,QAAQ,EAAE,UAAU,EAAE,OAAO,EAAS;IAC5D,MAAM,WAAW,IAAA,iJAAW;IAE5B,MAAM,QAAsD;QAC1D;YAAE,MAAM;YAAO,OAAO;YAAc,MAAM,+OAAe;QAAC;QAC1D;YAAE,MAAM;YAAY,OAAO;YAAW,MAAM,gNAAM;QAAC;QACnD;YAAE,MAAM;YAAW,OAAO;YAAiB,MAAM,sNAAQ;QAAC;QAC1D,yBAAyB;QACzB;YAAE,MAAM;YAAgB,OAAO;YAAa,MAAM,gNAAM;QAAC;KAC1D;IAED,IAAI,SAAS;QACX,MAAM,IAAI,CAAC;YAAE,MAAM;YAAkB,OAAO;YAAiB,MAAM,mOAAW;QAAC;IACjF;IAEA,qBACE,8OAAC;QAAM,WAAU;;0BACf,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,uKAAI;oBAAC,MAAK;oBAAI,WAAU;oBAA0B,SAAS;;sCAC1D,8OAAC,wIAAK;4BAAC,KAAI;4BAAY,KAAI;4BAAa,OAAO;4BAAI,QAAQ;4BAAI,WAAU;4BAAa,QAAQ;;;;;;sCAC9F,8OAAC;4BAAK,WAAU;sCAA+B;;;;;;;;;;;;;;;;;0BAInD,8OAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,IAAI,EAAE;oBACrC,MAAM,SAAS,aAAa,QAAQ,SAAS,UAAU,CAAC,GAAG,KAAK,CAAC,CAAC;oBAClE,qBACE,8OAAC,uKAAI;wBAEH,MAAM;wBACN,SAAS;wBACT,WAAW;4BACT;4BACA,SAAS,gCAAgC;yBAC1C,CAAC,IAAI,CAAC;wBACP,gBAAc,SAAS,SAAS;;0CAEhC,8OAAC;gCAAK,MAAM;gCAAI,WAAU;;;;;;0CAC1B,8OAAC;gCAAK,WAAU;0CAAW;;;;;;;uBAVtB;;;;;gBAaX;;;;;;0BAGF,8OAAC;gBAAI,WAAU;;oBAAwD;oBAClE,IAAI,OAAO,WAAW;oBAAG;;;;;;;;;;;;;AAIpC","debugId":null}},
    {"offset": {"line": 595, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/components/I18nProvider.tsx"],"sourcesContent":["// src/components/I18nProvider.tsx\r\n\"use client\";\r\n\r\nimport React, { createContext, useContext, useEffect, useMemo, useState } from \"react\";\r\n\r\n/**\r\n * Dicionários simples. Mantive pt-BR como padrão.\r\n * Se quiser, pode preencher/enxugar o en-US — o app vai cair no pt-BR quando faltar chave.\r\n */\r\ntype Dict = Record<string, string | ((vars?: Record<string, any>) => string)>;\r\n\r\nconst ptBR: Dict = {\r\n  // Globais / Header / Sidebar\r\n  welcome: ({ name }: any) => (name ? `Bem-vindo, ${name}` : \"Bem-vindo\"),\r\n  myPanel: \"Meu Painel\",\r\n  ranking: \"Ranking\",\r\n  settings: \"Configurações\",\r\n  admin: \"Admin\",\r\n  refresh: \"Atualizar\",\r\n  prev: \"Anterior\",\r\n  next: \"Próxima\",\r\n  signOut: \"Sair\",\r\n\r\n  // Página /me\r\n  yourPoints: \"Seus pontos:\",\r\n  creatingExample: \"Criando exemplo...\",\r\n  createExample: \"Criar dados de exemplo\",\r\n  weeklyGoalLabel: ({ done, goal }: any) => `Meta semanal (seg–dom): ${done}/${goal} módulos`,\r\n  saveGoal: \"Salvar meta\",\r\n  generalProgress: \"Progresso geral\",\r\n  modulesCompleted: ({ done, total }: any) => `${done}/${total} módulos concluídos`,\r\n  loadingCoursesModules: \"Carregando cursos e módulos...\",\r\n  noActiveCourses: \"Nenhum curso ativo. Use “Criar dados de exemplo”.\",\r\n  donePlusPoints: \"Concluído (+10 pts)\",\r\n  pending: \"Pendente\",\r\n  updating: \"Atualizando...\",\r\n  undo: \"Desfazer\",\r\n  conclude: \"Concluir\",\r\n\r\n  // Admin / Cursos\r\n  adminCoursesTitle: \"Admin • Cursos & Módulos\",\r\n  adminCoursesSubtitle:\r\n    \"Crie cursos, adicione módulos, ative/desative e edite títulos. Somente administradores podem alterar.\",\r\n  demoMode: \"Modo Demo\",\r\n  demoModeDesc: \"Popula vários cursos e módulos de exemplo.\",\r\n  populating: \"Populando...\",\r\n  populateDemo: \"Popular demo\",\r\n  newCourse: \"Novo curso\",\r\n  courseTitlePlaceholder: \"Título do curso\",\r\n  courseDescPlaceholder: \"Descrição (opcional)\",\r\n  creating: \"Criando...\",\r\n  createCourse: \"Criar curso\",\r\n  titleLabel: \"Título\",\r\n  disable: \"Desativar\",\r\n  enable: \"Ativar\",\r\n  delete: \"Excluir\",\r\n  modulePlaceholder: \"Novo módulo...\",\r\n  addModule: \"Adicionar módulo\",\r\n  adding: \"Adicionando...\",\r\n  moduleLabel: \"Módulo\",\r\n  save: \"Salvar\",\r\n  cancel: \"Cancelar\",\r\n  edit: \"Editar\",\r\n  loading: \"Carregando...\",\r\n  noCourses: \"Nenhum curso. Crie um acima.\",\r\n\r\n  // Ranking\r\n  position: \"Posição\",\r\n  user: \"Usuário\",\r\n  points: \"Pontos\",\r\n  loadingRanking: \"Carregando ranking...\",\r\n  noDataYet: \"Sem dados ainda.\",\r\n  paginationSummary: ({ total, page, pages }: any) => `${total} usuários • página ${page} de ${pages}`,\r\n};\r\n\r\nconst enUS: Dict = {\r\n  // (opcional, serve como fallback para quando você selecionar \"en-US\" no futuro)\r\n  welcome: ({ name }: any) => (name ? `Welcome, ${name}` : \"Welcome\"),\r\n  myPanel: \"My Panel\",\r\n  ranking: \"Ranking\",\r\n  settings: \"Settings\",\r\n  admin: \"Admin\",\r\n  refresh: \"Refresh\",\r\n  prev: \"Previous\",\r\n  next: \"Next\",\r\n  signOut: \"Sign out\",\r\n};\r\n\r\nexport type Locale = \"pt-BR\" | \"en-US\";\r\n\r\nconst dictionaries: Record<Locale, Dict> = {\r\n  \"pt-BR\": ptBR,\r\n  \"en-US\": enUS,\r\n};\r\n\r\ntype I18nCtxType = {\r\n  locale: Locale;\r\n  setLocale: (l: Locale) => void;\r\n  t: (key: string, vars?: Record<string, any>) => string;\r\n};\r\n\r\nconst I18nCtx = createContext<I18nCtxType | null>(null);\r\n\r\nexport function I18nProvider({ children }: { children: React.ReactNode }) {\r\n  // Se não for usar troca de idioma agora, deixe fixo em 'pt-BR'\r\n  const [locale, setLocaleState] = useState<Locale>(\"pt-BR\");\r\n\r\n  // Mantém o atributo lang coerente (não é obrigatório, mas ajuda em SEO/acessibilidade)\r\n  useEffect(() => {\r\n    document.documentElement.setAttribute(\"lang\", locale);\r\n  }, [locale]);\r\n\r\n  // Exponho setLocale para compatibilidade futura (hoje pode ficar sem uso)\r\n  const setLocale = (l: Locale) => {\r\n    setLocaleState(l);\r\n  };\r\n\r\n  // Tradutor com fallback para pt-BR e, por fim, a própria chave\r\n  const t = useMemo(() => {\r\n    return (key: string, vars?: Record<string, any>) => {\r\n      const dict = dictionaries[locale] || ptBR;\r\n      const entry = dict[key];\r\n      if (typeof entry === \"function\") return (entry as any)(vars || {});\r\n      if (typeof entry === \"string\") return entry;\r\n\r\n      const fb = ptBR[key];\r\n      if (typeof fb === \"function\") return (fb as any)(vars || {});\r\n      if (typeof fb === \"string\") return fb;\r\n\r\n      return key;\r\n    };\r\n  }, [locale]);\r\n\r\n  const value = useMemo(() => ({ locale, setLocale, t }), [locale, t]);\r\n\r\n  return <I18nCtx.Provider value={value}>{children}</I18nCtx.Provider>;\r\n}\r\n\r\nexport function useI18n() {\r\n  const ctx = useContext(I18nCtx);\r\n  if (!ctx) throw new Error(\"useI18n must be used within I18nProvider\");\r\n  return ctx;\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 737, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/components/shell/AppShell.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { ReactNode, useEffect, useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport Sidebar from \"@/components/Sidebar\"; // ✅ caminho corrigido\r\nimport { Menu, LogOut, Shield } from \"lucide-react\";\r\nimport { supabaseBrowser } from \"@/lib/supabase/client\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { I18nProvider } from \"@/components/I18nProvider\";\r\n\r\nexport default function AppShell({ children }: { children: ReactNode }) {\r\n  const [open, setOpen] = useState(true);              // desktop\r\n  const [mobileOpen, setMobileOpen] = useState(false); // mobile\r\n  const [displayName, setDisplayName] = useState<string | null>(null);\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const supabase = supabaseBrowser();\r\n    supabase.auth.getUser().then(async ({ data }) => {\r\n      const u = data.user;\r\n      if (u) {\r\n        const { data: prof } = await supabase\r\n          .from(\"profiles\")\r\n          .select(\"is_admin, full_name, name\")\r\n          .eq(\"id\", u.id)\r\n          .single();\r\n\r\n        setIsAdmin(!!prof?.is_admin);\r\n        const name =\r\n          (prof?.full_name && String(prof.full_name).trim()) ||\r\n          (prof?.name && String(prof.name).trim()) ||\r\n          u.email ||\r\n          null;\r\n        setDisplayName(name);\r\n      } else {\r\n        setIsAdmin(false);\r\n        setDisplayName(null);\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  async function signOut() {\r\n    const supabase = supabaseBrowser();\r\n    await supabase.auth.signOut();\r\n    router.replace(\"/login\");\r\n  }\r\n\r\n  function handleNavigate() {\r\n    setMobileOpen(false);\r\n  }\r\n\r\n  return (\r\n    <I18nProvider>\r\n      <div\r\n        className=\"min-h-screen w-full grid\"\r\n        style={{ gridTemplateColumns: open ? \"18rem 1fr\" : \"0 1fr\" }}\r\n      >\r\n        {/* Sidebar Desktop */}\r\n        <div className=\"hidden lg:block border-r border-white/10 bg-[var(--surface)]/70 backdrop-blur-xl\">\r\n          {open && <Sidebar isAdmin={isAdmin} />}\r\n        </div>\r\n\r\n        {/* Conteúdo */}\r\n        <div className=\"min-h-screen flex flex-col\">\r\n          {/* Topbar */}\r\n          <header className=\"sticky top-0 z-30 h-14 border-b border-white/10 bg-[var(--surface)]/70 backdrop-blur flex items-center justify-between px-3 sm:px-4 lg:px-6\">\r\n            <div className=\"flex items-center gap-2\">\r\n              {/* Toggle Mobile Drawer */}\r\n              <button\r\n                className=\"btn-icon lg:hidden\"\r\n                onClick={() => setMobileOpen(true)}\r\n                aria-label=\"Abrir menu\"\r\n              >\r\n                <Menu size={18} />\r\n              </button>\r\n\r\n              {/* Toggle Largura Sidebar (desktop) */}\r\n              <button\r\n                className=\"btn-icon hidden lg:inline-flex\"\r\n                onClick={() => setOpen((v) => !v)}\r\n                aria-label={open ? \"Recolher menu\" : \"Expandir menu\"}\r\n              >\r\n                <Menu size={18} />\r\n              </button>\r\n\r\n              <span className=\"text-sm opacity-80 hidden sm:block\">\r\n                {displayName ? `Bem-vindo, ${displayName}` : \"Bem-vindo\"}\r\n              </span>\r\n            </div>\r\n\r\n            {/* Ações à direita */}\r\n            <div className=\"flex items-center gap-2\">\r\n              {/* ⬇️ Atalho de Segurança */}\r\n              <Link href=\"/me/security\" className=\"btn btn-outline\" title=\"Segurança da conta\">\r\n                <Shield size={16} />\r\n                <span className=\"hidden sm:inline\">Segurança</span>\r\n              </Link>\r\n\r\n              <button onClick={signOut} className=\"btn btn-outline\" title=\"Sair\">\r\n                <LogOut size={16} />\r\n                <span className=\"hidden sm:inline\">Sair</span>\r\n              </button>\r\n            </div>\r\n          </header>\r\n\r\n          <main className=\"flex-1 p-4 sm:p-6 lg:p-8\">{children}</main>\r\n        </div>\r\n\r\n        {/* Drawer Mobile */}\r\n        {mobileOpen && (\r\n          <div className=\"lg:hidden fixed inset-0 z-40\">\r\n            {/* overlay */}\r\n            <button\r\n              className=\"absolute inset-0 bg-black/50\"\r\n              onClick={() => setMobileOpen(false)}\r\n              aria-label=\"Fechar menu\"\r\n            />\r\n            <div className=\"absolute left-0 top-0 h-full w-72 bg-[var(--surface)]/90 border-r border-white/10 shadow-xl\">\r\n              <Sidebar isAdmin={isAdmin} onNavigate={handleNavigate} />\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </I18nProvider>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA,4NAA4C,sBAAsB;AAClE;AAAA;AAAA;AACA;AACA;AACA;AARA;;;;;;;;;AAUe,SAAS,SAAS,EAAE,QAAQ,EAA2B;IACpE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC,OAAoB,UAAU;IAC/D,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC,QAAQ,SAAS;IAC9D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAgB;IAC9D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACR,MAAM,WAAW,IAAA,mJAAe;QAChC,SAAS,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE;YAC1C,MAAM,IAAI,KAAK,IAAI;YACnB,IAAI,GAAG;gBACL,MAAM,EAAE,MAAM,IAAI,EAAE,GAAG,MAAM,SAC1B,IAAI,CAAC,YACL,MAAM,CAAC,6BACP,EAAE,CAAC,MAAM,EAAE,EAAE,EACb,MAAM;gBAET,WAAW,CAAC,CAAC,MAAM;gBACnB,MAAM,OACJ,AAAC,MAAM,aAAa,OAAO,KAAK,SAAS,EAAE,IAAI,MAC9C,MAAM,QAAQ,OAAO,KAAK,IAAI,EAAE,IAAI,MACrC,EAAE,KAAK,IACP;gBACF,eAAe;YACjB,OAAO;gBACL,WAAW;gBACX,eAAe;YACjB;QACF;IACF,GAAG,EAAE;IAEL,eAAe;QACb,MAAM,WAAW,IAAA,mJAAe;QAChC,MAAM,SAAS,IAAI,CAAC,OAAO;QAC3B,OAAO,OAAO,CAAC;IACjB;IAEA,SAAS;QACP,cAAc;IAChB;IAEA,qBACE,8OAAC,kJAAY;kBACX,cAAA,8OAAC;YACC,WAAU;YACV,OAAO;gBAAE,qBAAqB,OAAO,cAAc;YAAQ;;8BAG3D,8OAAC;oBAAI,WAAU;8BACZ,sBAAQ,8OAAC,wIAAO;wBAAC,SAAS;;;;;;;;;;;8BAI7B,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC;4BAAO,WAAU;;8CAChB,8OAAC;oCAAI,WAAU;;sDAEb,8OAAC;4CACC,WAAU;4CACV,SAAS,IAAM,cAAc;4CAC7B,cAAW;sDAEX,cAAA,8OAAC,0MAAI;gDAAC,MAAM;;;;;;;;;;;sDAId,8OAAC;4CACC,WAAU;4CACV,SAAS,IAAM,QAAQ,CAAC,IAAM,CAAC;4CAC/B,cAAY,OAAO,kBAAkB;sDAErC,cAAA,8OAAC,0MAAI;gDAAC,MAAM;;;;;;;;;;;sDAGd,8OAAC;4CAAK,WAAU;sDACb,cAAc,CAAC,WAAW,EAAE,aAAa,GAAG;;;;;;;;;;;;8CAKjD,8OAAC;oCAAI,WAAU;;sDAEb,8OAAC,uKAAI;4CAAC,MAAK;4CAAe,WAAU;4CAAkB,OAAM;;8DAC1D,8OAAC,gNAAM;oDAAC,MAAM;;;;;;8DACd,8OAAC;oDAAK,WAAU;8DAAmB;;;;;;;;;;;;sDAGrC,8OAAC;4CAAO,SAAS;4CAAS,WAAU;4CAAkB,OAAM;;8DAC1D,8OAAC,oNAAM;oDAAC,MAAM;;;;;;8DACd,8OAAC;oDAAK,WAAU;8DAAmB;;;;;;;;;;;;;;;;;;;;;;;;sCAKzC,8OAAC;4BAAK,WAAU;sCAA4B;;;;;;;;;;;;gBAI7C,4BACC,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC;4BACC,WAAU;4BACV,SAAS,IAAM,cAAc;4BAC7B,cAAW;;;;;;sCAEb,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC,wIAAO;gCAAC,SAAS;gCAAS,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOrD","debugId":null}}]
}