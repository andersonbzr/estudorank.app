{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/lib/supabase/client.ts"],"sourcesContent":["// src/lib/supabase/client.ts\r\nimport { createClient, type SupabaseClient } from \"@supabase/supabase-js\";\r\n\r\nlet _client: SupabaseClient | null = null;\r\n\r\n/**\r\n * Cliente do Supabase para uso no browser (componentes client).\r\n * Usa storageKey custom \"sr-auth\" para evitar conflitos e manter sessão.\r\n */\r\nexport function supabaseBrowser(): SupabaseClient {\r\n  if (_client) return _client;\r\n\r\n  const url = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\n  const anon = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\r\n\r\n  if (!url || !anon) {\r\n    throw new Error(\r\n      \"Env vars ausentes: defina NEXT_PUBLIC_SUPABASE_URL e NEXT_PUBLIC_SUPABASE_ANON_KEY.\"\r\n    );\r\n  }\r\n\r\n  _client = createClient(url, anon, {\r\n    auth: {\r\n      persistSession: true,\r\n      autoRefreshToken: true,\r\n      storageKey: \"sr-auth\",\r\n    },\r\n  });\r\n\r\n  return _client;\r\n}\r\n"],"names":[],"mappings":"AAAA,6BAA6B;;;;;AAC7B;;AAEA,IAAI,UAAiC;AAM9B,SAAS;IACd,IAAI,SAAS,OAAO;IAEpB,MAAM;IACN,MAAM;IAEN;;IAMA,UAAU,IAAA,uMAAY,EAAC,KAAK,MAAM;QAChC,MAAM;YACJ,gBAAgB;YAChB,kBAAkB;YAClB,YAAY;QACd;IACF;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/components/Sidebar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\nimport {\r\n  Trophy,\r\n  LayoutDashboard,\r\n  Settings,\r\n  ShieldCheck,\r\n  Shield,\r\n} from \"lucide-react\";\r\nimport Image from \"next/image\";\r\nimport clsx from \"clsx\";\r\n\r\ntype Props = {\r\n  onNavigate?: () => void;\r\n  isAdmin?: boolean;\r\n  /** Quando true, renderiza mini-rail (ícones apenas) no desktop */\r\n  collapsed?: boolean;\r\n};\r\n\r\ntype Item = { href: string; label: string; icon: React.ComponentType<any> };\r\n\r\nexport default function Sidebar({\r\n  onNavigate,\r\n  isAdmin,\r\n  collapsed = false,\r\n}: Props) {\r\n  const pathname = usePathname();\r\n\r\n  const items: Item[] = [\r\n    { href: \"/me\", label: \"Meu Painel\", icon: LayoutDashboard },\r\n    { href: \"/ranking\", label: \"Ranking\", icon: Trophy },\r\n    { href: \"/config\", label: \"Configurações\", icon: Settings },\r\n    { href: \"/me/security\", label: \"Segurança\", icon: Shield },\r\n  ];\r\n\r\n  // ✅ Administração unificada em /admin\r\n  if (isAdmin) {\r\n    items.push({\r\n      href: \"/admin\",\r\n      label: \"Administração\",\r\n      icon: ShieldCheck,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <aside className=\"h-screen sticky top-0 bg-[var(--surface)]/80 backdrop-blur-xl border-r border-white/10 flex flex-col\">\r\n      {/* Header */}\r\n      <div\r\n        className={clsx(\r\n          \"h-14 border-b border-white/10 px-4 flex items-center gap-2\",\r\n          collapsed && \"justify-center px-0\"\r\n        )}\r\n      >\r\n        <Link\r\n          href=\"/\"\r\n          className={clsx(\r\n            \"flex items-center gap-2 transition-transform hover:scale-[1.02]\",\r\n            collapsed && \"justify-center\"\r\n          )}\r\n          onClick={onNavigate}\r\n          aria-label=\"Ir para a página inicial\"\r\n        >\r\n          <Image\r\n            src=\"/logo.png\"\r\n            alt=\"EstudoRank\"\r\n            width={collapsed ? 22 : 28}\r\n            height={collapsed ? 22 : 28}\r\n            className=\"rounded-sm drop-shadow-[0_0_6px_rgba(163,230,53,0.30)]\"\r\n            priority\r\n          />\r\n          {!collapsed && (\r\n            <span className=\"font-semibold tracking-tight\">EstudoRank</span>\r\n          )}\r\n        </Link>\r\n      </div>\r\n\r\n      {/* Navegação */}\r\n      <nav className={clsx(\"flex-1 p-2 space-y-2\", collapsed && \"p-2\")}>\r\n        {items.map((item) => {\r\n          const active =\r\n            pathname === item.href || pathname.startsWith(`${item.href}/`);\r\n          return (\r\n            <NavItem\r\n              key={item.href}\r\n              item={item}\r\n              active={active}\r\n              collapsed={collapsed}\r\n              onNavigate={onNavigate}\r\n            />\r\n          );\r\n        })}\r\n      </nav>\r\n\r\n      {/* Footer */}\r\n      {!collapsed ? (\r\n        <div className=\"px-3 py-3 text-xs opacity-60 border-t border-white/10\">\r\n          © {new Date().getFullYear()} EstudoRank\r\n        </div>\r\n      ) : (\r\n        <div className=\"py-3 border-t border-white/10 text-center text-[10px] opacity-50 select-none\">\r\n          © {new Date().getFullYear()}\r\n        </div>\r\n      )}\r\n    </aside>\r\n  );\r\n}\r\n\r\n/* --------------------------- Subcomponentes --------------------------- */\r\n\r\nfunction NavItem({\r\n  item,\r\n  active,\r\n  collapsed,\r\n  onNavigate,\r\n}: {\r\n  item: Item;\r\n  active: boolean;\r\n  collapsed: boolean;\r\n  onNavigate?: () => void;\r\n}) {\r\n  const Icon = item.icon;\r\n\r\n  return (\r\n    <Link\r\n      href={item.href}\r\n      onClick={onNavigate}\r\n      aria-current={active ? \"page\" : undefined}\r\n      className={clsx(\r\n        \"group relative flex items-center gap-2 rounded-2xl border transition-all duration-200 outline-none focus-visible:ring-2 focus-visible:ring-indigo-400/40\",\r\n        collapsed ? \"justify-center p-2\" : \"px-3 py-2\",\r\n        active\r\n          ? \"bg-gradient-to-br from-lime-400/15 to-indigo-500/10 border-white/25 shadow-[0_0_0_1px_rgba(255,255,255,0.06),0_8px_24px_-8px_rgba(99,102,241,0.25)] text-lime-200\"\r\n          : \"bg-white/5 hover:bg-white/10 border-white/10 text-white/85 hover:text-white\"\r\n      )}\r\n    >\r\n      {/* Ícone */}\r\n      <Icon\r\n        size={18}\r\n        className={clsx(\r\n          \"transition-transform\",\r\n          active ? \"scale-[1.02]\" : \"group-hover:scale-105\"\r\n        )}\r\n        aria-hidden\r\n      />\r\n\r\n      {/* Label (só no modo expandido) */}\r\n      {!collapsed && <span className=\"text-sm\">{item.label}</span>}\r\n\r\n      {/* Tooltip custom (apenas no modo colapsado) */}\r\n      {collapsed && (\r\n        <span\r\n          className={clsx(\r\n            \"pointer-events-none absolute left-full ml-3 top-1/2 -translate-y-1/2\",\r\n            \"rounded-md bg-black/80 text-white text-xs px-2 py-1\",\r\n            \"opacity-0 translate-x-[-4px] group-hover:opacity-100 group-hover:translate-x-0\",\r\n            \"transition-all whitespace-nowrap z-50\"\r\n          )}\r\n          role=\"tooltip\"\r\n        >\r\n          {item.label}\r\n        </span>\r\n      )}\r\n    </Link>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AAZA;;;;;;;AAuBe,SAAS,QAAQ,EAC9B,UAAU,EACV,OAAO,EACP,YAAY,KAAK,EACX;IACN,MAAM,WAAW,IAAA,iJAAW;IAE5B,MAAM,QAAgB;QACpB;YAAE,MAAM;YAAO,OAAO;YAAc,MAAM,+OAAe;QAAC;QAC1D;YAAE,MAAM;YAAY,OAAO;YAAW,MAAM,gNAAM;QAAC;QACnD;YAAE,MAAM;YAAW,OAAO;YAAiB,MAAM,sNAAQ;QAAC;QAC1D;YAAE,MAAM;YAAgB,OAAO;YAAa,MAAM,gNAAM;QAAC;KAC1D;IAED,sCAAsC;IACtC,IAAI,SAAS;QACX,MAAM,IAAI,CAAC;YACT,MAAM;YACN,OAAO;YACP,MAAM,mOAAW;QACnB;IACF;IAEA,qBACE,8OAAC;QAAM,WAAU;;0BAEf,8OAAC;gBACC,WAAW,IAAA,gJAAI,EACb,8DACA,aAAa;0BAGf,cAAA,8OAAC,uKAAI;oBACH,MAAK;oBACL,WAAW,IAAA,gJAAI,EACb,mEACA,aAAa;oBAEf,SAAS;oBACT,cAAW;;sCAEX,8OAAC,wIAAK;4BACJ,KAAI;4BACJ,KAAI;4BACJ,OAAO,YAAY,KAAK;4BACxB,QAAQ,YAAY,KAAK;4BACzB,WAAU;4BACV,QAAQ;;;;;;wBAET,CAAC,2BACA,8OAAC;4BAAK,WAAU;sCAA+B;;;;;;;;;;;;;;;;;0BAMrD,8OAAC;gBAAI,WAAW,IAAA,gJAAI,EAAC,wBAAwB,aAAa;0BACvD,MAAM,GAAG,CAAC,CAAC;oBACV,MAAM,SACJ,aAAa,KAAK,IAAI,IAAI,SAAS,UAAU,CAAC,GAAG,KAAK,IAAI,CAAC,CAAC,CAAC;oBAC/D,qBACE,8OAAC;wBAEC,MAAM;wBACN,QAAQ;wBACR,WAAW;wBACX,YAAY;uBAJP,KAAK,IAAI;;;;;gBAOpB;;;;;;YAID,CAAC,0BACA,8OAAC;gBAAI,WAAU;;oBAAwD;oBAClE,IAAI,OAAO,WAAW;oBAAG;;;;;;qCAG9B,8OAAC;gBAAI,WAAU;;oBAA+E;oBACzF,IAAI,OAAO,WAAW;;;;;;;;;;;;;AAKnC;AAEA,0EAA0E,GAE1E,SAAS,QAAQ,EACf,IAAI,EACJ,MAAM,EACN,SAAS,EACT,UAAU,EAMX;IACC,MAAM,OAAO,KAAK,IAAI;IAEtB,qBACE,8OAAC,uKAAI;QACH,MAAM,KAAK,IAAI;QACf,SAAS;QACT,gBAAc,SAAS,SAAS;QAChC,WAAW,IAAA,gJAAI,EACb,4JACA,YAAY,uBAAuB,aACnC,SACI,sKACA;;0BAIN,8OAAC;gBACC,MAAM;gBACN,WAAW,IAAA,gJAAI,EACb,wBACA,SAAS,iBAAiB;gBAE5B,aAAW;;;;;;YAIZ,CAAC,2BAAa,8OAAC;gBAAK,WAAU;0BAAW,KAAK,KAAK;;;;;;YAGnD,2BACC,8OAAC;gBACC,WAAW,IAAA,gJAAI,EACb,wEACA,uDACA,kFACA;gBAEF,MAAK;0BAEJ,KAAK,KAAK;;;;;;;;;;;;AAKrB","debugId":null}},
    {"offset": {"line": 256, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/components/I18nProvider.tsx"],"sourcesContent":["// src/components/I18nProvider.tsx\r\n\"use client\";\r\n\r\nimport React, { createContext, useContext, useEffect, useMemo, useState } from \"react\";\r\n\r\n/**\r\n * Dicionários simples. Mantive pt-BR como padrão.\r\n * Se quiser, pode preencher/enxugar o en-US — o app vai cair no pt-BR quando faltar chave.\r\n */\r\ntype Dict = Record<string, string | ((vars?: Record<string, any>) => string)>;\r\n\r\nconst ptBR: Dict = {\r\n  // Globais / Header / Sidebar\r\n  welcome: ({ name }: any) => (name ? `Bem-vindo, ${name}` : \"Bem-vindo\"),\r\n  myPanel: \"Meu Painel\",\r\n  ranking: \"Ranking\",\r\n  settings: \"Configurações\",\r\n  admin: \"Admin\",\r\n  refresh: \"Atualizar\",\r\n  prev: \"Anterior\",\r\n  next: \"Próxima\",\r\n  signOut: \"Sair\",\r\n\r\n  // Página /me\r\n  yourPoints: \"Seus pontos:\",\r\n  creatingExample: \"Criando exemplo...\",\r\n  createExample: \"Criar dados de exemplo\",\r\n  weeklyGoalLabel: ({ done, goal }: any) => `Meta semanal (seg–dom): ${done}/${goal} módulos`,\r\n  saveGoal: \"Salvar meta\",\r\n  generalProgress: \"Progresso geral\",\r\n  modulesCompleted: ({ done, total }: any) => `${done}/${total} módulos concluídos`,\r\n  loadingCoursesModules: \"Carregando cursos e módulos...\",\r\n  noActiveCourses: \"Nenhum curso ativo. Use “Criar dados de exemplo”.\",\r\n  donePlusPoints: \"Concluído (+10 pts)\",\r\n  pending: \"Pendente\",\r\n  updating: \"Atualizando...\",\r\n  undo: \"Desfazer\",\r\n  conclude: \"Concluir\",\r\n\r\n  // Admin / Cursos\r\n  adminCoursesTitle: \"Admin • Cursos & Módulos\",\r\n  adminCoursesSubtitle:\r\n    \"Crie cursos, adicione módulos, ative/desative e edite títulos. Somente administradores podem alterar.\",\r\n  demoMode: \"Modo Demo\",\r\n  demoModeDesc: \"Popula vários cursos e módulos de exemplo.\",\r\n  populating: \"Populando...\",\r\n  populateDemo: \"Popular demo\",\r\n  newCourse: \"Novo curso\",\r\n  courseTitlePlaceholder: \"Título do curso\",\r\n  courseDescPlaceholder: \"Descrição (opcional)\",\r\n  creating: \"Criando...\",\r\n  createCourse: \"Criar curso\",\r\n  titleLabel: \"Título\",\r\n  disable: \"Desativar\",\r\n  enable: \"Ativar\",\r\n  delete: \"Excluir\",\r\n  modulePlaceholder: \"Novo módulo...\",\r\n  addModule: \"Adicionar módulo\",\r\n  adding: \"Adicionando...\",\r\n  moduleLabel: \"Módulo\",\r\n  save: \"Salvar\",\r\n  cancel: \"Cancelar\",\r\n  edit: \"Editar\",\r\n  loading: \"Carregando...\",\r\n  noCourses: \"Nenhum curso. Crie um acima.\",\r\n\r\n  // Ranking\r\n  position: \"Posição\",\r\n  user: \"Usuário\",\r\n  points: \"Pontos\",\r\n  loadingRanking: \"Carregando ranking...\",\r\n  noDataYet: \"Sem dados ainda.\",\r\n  paginationSummary: ({ total, page, pages }: any) => `${total} usuários • página ${page} de ${pages}`,\r\n};\r\n\r\nconst enUS: Dict = {\r\n  // (opcional, serve como fallback para quando você selecionar \"en-US\" no futuro)\r\n  welcome: ({ name }: any) => (name ? `Welcome, ${name}` : \"Welcome\"),\r\n  myPanel: \"My Panel\",\r\n  ranking: \"Ranking\",\r\n  settings: \"Settings\",\r\n  admin: \"Admin\",\r\n  refresh: \"Refresh\",\r\n  prev: \"Previous\",\r\n  next: \"Next\",\r\n  signOut: \"Sign out\",\r\n};\r\n\r\nexport type Locale = \"pt-BR\" | \"en-US\";\r\n\r\nconst dictionaries: Record<Locale, Dict> = {\r\n  \"pt-BR\": ptBR,\r\n  \"en-US\": enUS,\r\n};\r\n\r\ntype I18nCtxType = {\r\n  locale: Locale;\r\n  setLocale: (l: Locale) => void;\r\n  t: (key: string, vars?: Record<string, any>) => string;\r\n};\r\n\r\nconst I18nCtx = createContext<I18nCtxType | null>(null);\r\n\r\nexport function I18nProvider({ children }: { children: React.ReactNode }) {\r\n  // Se não for usar troca de idioma agora, deixe fixo em 'pt-BR'\r\n  const [locale, setLocaleState] = useState<Locale>(\"pt-BR\");\r\n\r\n  // Mantém o atributo lang coerente (não é obrigatório, mas ajuda em SEO/acessibilidade)\r\n  useEffect(() => {\r\n    document.documentElement.setAttribute(\"lang\", locale);\r\n  }, [locale]);\r\n\r\n  // Exponho setLocale para compatibilidade futura (hoje pode ficar sem uso)\r\n  const setLocale = (l: Locale) => {\r\n    setLocaleState(l);\r\n  };\r\n\r\n  // Tradutor com fallback para pt-BR e, por fim, a própria chave\r\n  const t = useMemo(() => {\r\n    return (key: string, vars?: Record<string, any>) => {\r\n      const dict = dictionaries[locale] || ptBR;\r\n      const entry = dict[key];\r\n      if (typeof entry === \"function\") return (entry as any)(vars || {});\r\n      if (typeof entry === \"string\") return entry;\r\n\r\n      const fb = ptBR[key];\r\n      if (typeof fb === \"function\") return (fb as any)(vars || {});\r\n      if (typeof fb === \"string\") return fb;\r\n\r\n      return key;\r\n    };\r\n  }, [locale]);\r\n\r\n  const value = useMemo(() => ({ locale, setLocale, t }), [locale, t]);\r\n\r\n  return <I18nCtx.Provider value={value}>{children}</I18nCtx.Provider>;\r\n}\r\n\r\nexport function useI18n() {\r\n  const ctx = useContext(I18nCtx);\r\n  if (!ctx) throw new Error(\"useI18n must be used within I18nProvider\");\r\n  return ctx;\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 398, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/components/shell/AppShell.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { ReactNode, useEffect, useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport Sidebar from \"@/components/Sidebar\";\r\nimport { Menu, LogOut, Shield } from \"lucide-react\";\r\nimport { supabaseBrowser } from \"@/lib/supabase/client\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { I18nProvider } from \"@/components/I18nProvider\";\r\n\r\nexport default function AppShell({ children }: { children: ReactNode }) {\r\n  const [open, setOpen] = useState(true);              // desktop: expandida (true) / rail (false)\r\n  const [mobileOpen, setMobileOpen] = useState(false); // mobile drawer\r\n  const [displayName, setDisplayName] = useState<string | null>(null);\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const supabase = supabaseBrowser();\r\n    supabase.auth.getUser().then(async ({ data }) => {\r\n      const u = data.user;\r\n      if (u) {\r\n        const { data: prof } = await supabase\r\n          .from(\"profiles\")\r\n          .select(\"is_admin, full_name, name\")\r\n          .eq(\"id\", u.id)\r\n          .single();\r\n\r\n        setIsAdmin(!!prof?.is_admin);\r\n        const name =\r\n          (prof?.full_name && String(prof.full_name).trim()) ||\r\n          (prof?.name && String(prof.name).trim()) ||\r\n          u.email ||\r\n          null;\r\n        setDisplayName(name);\r\n      } else {\r\n        setIsAdmin(false);\r\n        setDisplayName(null);\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  async function signOut() {\r\n    const supabase = supabaseBrowser();\r\n    await supabase.auth.signOut();\r\n    router.replace(\"/login\");\r\n  }\r\n\r\n  function handleNavigate() {\r\n    setMobileOpen(false);\r\n  }\r\n\r\n  // Largura da 1ª coluna no desktop: 18rem (aberta) / 4rem (rail colapsada)\r\n  const desktopCol = open ? \"18rem\" : \"4rem\";\r\n\r\n  return (\r\n    <I18nProvider>\r\n      <div\r\n        className=\"min-h-screen w-full grid\"\r\n        style={{ gridTemplateColumns: `${desktopCol} 1fr` }}\r\n      >\r\n        {/* Sidebar Desktop */}\r\n        <div className=\"hidden lg:block border-r border-white/10 bg-[var(--surface)]/70 backdrop-blur-xl\">\r\n          <Sidebar isAdmin={isAdmin} collapsed={!open} />\r\n        </div>\r\n\r\n        {/* Conteúdo */}\r\n        <div className=\"min-h-screen flex flex-col\">\r\n          {/* Topbar */}\r\n          <header className=\"sticky top-0 z-30 h-14 border-b border-white/10 bg-[var(--surface)]/70 backdrop-blur flex items-center justify-between px-3 sm:px-4 lg:px-6\">\r\n            <div className=\"flex items-center gap-2\">\r\n              {/* Toggle Mobile Drawer */}\r\n              <button\r\n                className=\"btn-icon lg:hidden\"\r\n                onClick={() => setMobileOpen(true)}\r\n                aria-label=\"Abrir menu\"\r\n              >\r\n                <Menu size={18} />\r\n              </button>\r\n\r\n              {/* Toggle largura sidebar (desktop) */}\r\n              <button\r\n                className=\"btn-icon hidden lg:inline-flex\"\r\n                onClick={() => setOpen((v) => !v)}\r\n                aria-label={open ? \"Recolher menu\" : \"Expandir menu\"}\r\n                title={open ? \"Recolher menu\" : \"Expandir menu\"}\r\n              >\r\n                <Menu size={18} />\r\n              </button>\r\n\r\n              <span className=\"text-sm opacity-80 hidden sm:block\">\r\n                {displayName ? `Bem-vindo, ${displayName}` : \"Bem-vindo\"}\r\n              </span>\r\n            </div>\r\n\r\n            {/* Ações à direita */}\r\n            <div className=\"flex items-center gap-2\">\r\n              {/* ✅ Badge “Admin” (só aparece quando is_admin = true) */}\r\n              {isAdmin && (\r\n                <span className=\"hidden sm:inline-flex items-center gap-1 px-2 py-1 rounded-lg bg-emerald-500/15 border border-emerald-400/20 text-emerald-200 text-xs\">\r\n                  Admin\r\n                </span>\r\n              )}\r\n\r\n              <Link href=\"/me/security\" className=\"btn btn-outline\" title=\"Segurança da conta\">\r\n                <Shield size={16} />\r\n                <span className=\"hidden sm:inline\">Segurança</span>\r\n              </Link>\r\n\r\n              <button onClick={signOut} className=\"btn btn-outline\" title=\"Sair\">\r\n                <LogOut size={16} />\r\n                <span className=\"hidden sm:inline\">Sair</span>\r\n              </button>\r\n            </div>\r\n          </header>\r\n\r\n          <main className=\"flex-1 p-4 sm:p-6 lg:p-8\">{children}</main>\r\n        </div>\r\n\r\n        {/* Drawer Mobile */}\r\n        {mobileOpen && (\r\n          <div className=\"lg:hidden fixed inset-0 z-40\">\r\n            {/* overlay */}\r\n            <button\r\n              className=\"absolute inset-0 bg-black/50\"\r\n              onClick={() => setMobileOpen(false)}\r\n              aria-label=\"Fechar menu\"\r\n            />\r\n            <div className=\"absolute left-0 top-0 h-full w-72 bg-[var(--surface)]/90 border-r border-white/10 shadow-xl\">\r\n              <Sidebar isAdmin={isAdmin} onNavigate={handleNavigate} />\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </I18nProvider>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 668, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/components/ui/Spinner.tsx"],"sourcesContent":["// src/components/ui/Spinner.tsx\r\nexport default function Spinner({ label }: { label?: string }) {\r\n  return (\r\n    <div className=\"inline-flex items-center gap-2\" role=\"status\" aria-live=\"polite\">\r\n      <svg\r\n        className=\"animate-spin h-4 w-4\"\r\n        viewBox=\"0 0 24 24\"\r\n        aria-hidden=\"true\"\r\n      >\r\n        <circle\r\n          className=\"opacity-25\"\r\n          cx=\"12\"\r\n          cy=\"12\"\r\n          r=\"10\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth=\"4\"\r\n          fill=\"none\"\r\n        />\r\n        <path\r\n          className=\"opacity-75\"\r\n          d=\"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z\"\r\n          fill=\"currentColor\"\r\n        />\r\n      </svg>\r\n      {label && <span>{label}</span>}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,gCAAgC;;;;;;;AACjB,SAAS,QAAQ,EAAE,KAAK,EAAsB;IAC3D,qBACE,8OAAC;QAAI,WAAU;QAAiC,MAAK;QAAS,aAAU;;0BACtE,8OAAC;gBACC,WAAU;gBACV,SAAQ;gBACR,eAAY;;kCAEZ,8OAAC;wBACC,WAAU;wBACV,IAAG;wBACH,IAAG;wBACH,GAAE;wBACF,QAAO;wBACP,aAAY;wBACZ,MAAK;;;;;;kCAEP,8OAAC;wBACC,WAAU;wBACV,GAAE;wBACF,MAAK;;;;;;;;;;;;YAGR,uBAAS,8OAAC;0BAAM;;;;;;;;;;;;AAGvB","debugId":null}},
    {"offset": {"line": 732, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/components/AuthGuard.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { supabaseBrowser } from \"@/lib/supabase/client\";\r\nimport Spinner from \"@/components/ui/Spinner\";\r\n\r\nexport default function AuthGuard({ children }: { children: React.ReactNode }) {\r\n  const [ready, setReady] = useState(false);\r\n  const [authed, setAuthed] = useState<boolean | null>(null);\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    (async () => {\r\n      const supabase = supabaseBrowser();\r\n      const { data } = await supabase.auth.getSession();\r\n      if (!isMounted) return;\r\n      setAuthed(!!data.session);\r\n      setReady(true);\r\n      if (!data.session) {\r\n        // sem sessão => manda pro login\r\n        window.location.replace(\"/login\");\r\n      }\r\n    })();\r\n    return () => { isMounted = false; };\r\n  }, []);\r\n\r\n  if (!ready) {\r\n    return (\r\n      <div className=\"min-h-[40vh] grid place-items-center\">\r\n        <Spinner label=\"Verificando sessão...\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return authed ? <>{children}</> : null;\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAKe,SAAS,UAAU,EAAE,QAAQ,EAAiC;IAC3E,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAiB;IAErD,IAAA,kNAAS,EAAC;QACR,IAAI,YAAY;QAChB,CAAC;YACC,MAAM,WAAW,IAAA,mJAAe;YAChC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,UAAU;YAC/C,IAAI,CAAC,WAAW;YAChB,UAAU,CAAC,CAAC,KAAK,OAAO;YACxB,SAAS;YACT,IAAI,CAAC,KAAK,OAAO,EAAE;gBACjB,gCAAgC;gBAChC,OAAO,QAAQ,CAAC,OAAO,CAAC;YAC1B;QACF,CAAC;QACD,OAAO;YAAQ,YAAY;QAAO;IACpC,GAAG,EAAE;IAEL,IAAI,CAAC,OAAO;QACV,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC,8IAAO;gBAAC,OAAM;;;;;;;;;;;IAGrB;IAEA,OAAO,uBAAS;kBAAG;wBAAe;AACpC","debugId":null}},
    {"offset": {"line": 789, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/app/me/security/page.tsx"],"sourcesContent":["// src/app/me/security/page.tsx\r\n\"use client\";\r\n\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport {\r\n  ShieldCheck,\r\n  Eye,\r\n  EyeOff,\r\n  CheckCircle2,\r\n  XCircle,\r\n  LockKeyhole,\r\n  Loader2,\r\n} from \"lucide-react\";\r\nimport { supabaseBrowser } from \"@/lib/supabase/client\";\r\nimport AppShell from \"@/components/shell/AppShell\";\r\nimport AuthGuard from \"@/components/AuthGuard\";\r\n\r\ntype Strength = {\r\n  score: 0 | 1 | 2 | 3 | 4;\r\n  label: string;\r\n};\r\n\r\nfunction scorePassword(pwd: string): Strength {\r\n  let score: Strength[\"score\"] = 0;\r\n  if (!pwd) return { score, label: \"Muito fraca\" };\r\n  const len = pwd.length >= 12 ? 2 : pwd.length >= 8 ? 1 : 0;\r\n  const hasLower = /[a-z]/.test(pwd) ? 1 : 0;\r\n  const hasUpper = /[A-Z]/.test(pwd) ? 1 : 0;\r\n  const hasNum = /\\d/.test(pwd) ? 1 : 0;\r\n  const hasSym = /[^A-Za-z0-9]/.test(pwd) ? 1 : 0;\r\n\r\n  const bits = len + hasLower + hasUpper + hasNum + hasSym;\r\n  if (bits >= 5) score = 4;\r\n  else if (bits === 4) score = 3;\r\n  else if (bits === 3) score = 2;\r\n  else if (bits === 2) score = 1;\r\n  else score = 0;\r\n\r\n  const label =\r\n    score === 4 ? \"Excelente\" :\r\n    score === 3 ? \"Forte\" :\r\n    score === 2 ? \"Média\" :\r\n    score === 1 ? \"Fraca\" : \"Muito fraca\";\r\n\r\n  return { score, label };\r\n}\r\n\r\nexport default function SecurityPage() {\r\n  const supabase = useMemo(() => supabaseBrowser(), []);\r\n  const [email, setEmail] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    supabase.auth.getUser().then(({ data }) => setEmail(data.user?.email ?? null));\r\n  }, [supabase]);\r\n\r\n  return (\r\n    <AuthGuard>\r\n      <AppShell>\r\n        <main className=\"max-w-3xl mx-auto px-4 lg:px-0 py-8 space-y-6\">\r\n          {/* header */}\r\n          <div className=\"flex items-start justify-between\">\r\n            <div>\r\n              <h1 className=\"text-3xl font-semibold tracking-tight\">Segurança</h1>\r\n              <p className=\"opacity-75 mt-1\">\r\n                Altere sua senha. Por segurança, pediremos a senha atual para confirmar.\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* soft background glow */}\r\n          <div className=\"pointer-events-none absolute inset-0 -z-10\">\r\n            <div className=\"absolute -top-20 -left-24 w-[420px] h-[420px] rounded-full blur-3xl opacity-[0.12] bg-lime-400/40\" />\r\n            <div className=\"absolute -bottom-24 -right-24 w-[520px] h-[520px] rounded-full blur-3xl opacity-[0.10] bg-indigo-500/40\" />\r\n          </div>\r\n\r\n          <PasswordCard email={email} />\r\n        </main>\r\n      </AppShell>\r\n    </AuthGuard>\r\n  );\r\n}\r\n\r\nfunction PasswordCard({ email }: { email: string | null }) {\r\n  const supabase = useMemo(() => supabaseBrowser(), []);\r\n\r\n  const [current, setCurrent] = useState(\"\");\r\n  const [next, setNext] = useState(\"\");\r\n  const [confirm, setConfirm] = useState(\"\");\r\n\r\n  const [showCurrent, setShowCurrent] = useState(false);\r\n  const [showNext, setShowNext] = useState(false);\r\n  const [showConfirm, setShowConfirm] = useState(false);\r\n\r\n  const [busy, setBusy] = useState(false);\r\n  const [toast, setToast] = useState<{ type: \"ok\" | \"err\"; msg: string } | null>(null);\r\n\r\n  const st = scorePassword(next);\r\n  const okLen = next.length >= 8;\r\n  const okUpper = /[A-Z]/.test(next);\r\n  const okLower = /[a-z]/.test(next);\r\n  const okNum = /\\d/.test(next);\r\n  const okSym = /[^A-Za-z0-9]/.test(next);\r\n  const same = next && confirm && next === confirm;\r\n\r\n  const canSubmit = !!email && !!current && !!next && same && st.score >= 2 && okLen;\r\n\r\n  function barClass(idx: number) {\r\n    const on = st.score >= idx;\r\n    const colors = [\"bg-red-500/70\",\"bg-orange-400/80\",\"bg-yellow-300/80\",\"bg-lime-400/90\"];\r\n    return [\r\n      \"h-1.5 rounded-full transition-all\",\r\n      on ? colors[Math.min(idx-1, colors.length-1)] : \"bg-white/10\"\r\n    ].join(\" \");\r\n  }\r\n\r\n  async function changePassword() {\r\n    if (!email) return;\r\n    setBusy(true);\r\n    setToast(null);\r\n    try {\r\n      // 1) Reautentica\r\n      const { error: signErr } = await supabase.auth.signInWithPassword({\r\n        email,\r\n        password: current,\r\n      });\r\n      if (signErr) throw new Error(\"Senha atual incorreta.\");\r\n\r\n      // 2) Atualiza senha\r\n      const { error: updErr } = await supabase.auth.updateUser({ password: next });\r\n      if (updErr) throw updErr;\r\n\r\n      setToast({ type: \"ok\", msg: \"Senha alterada com sucesso!\" });\r\n      setCurrent(\"\"); setNext(\"\"); setConfirm(\"\");\r\n    } catch (e: any) {\r\n      setToast({ type: \"err\", msg: e.message || \"Não foi possível alterar a senha.\" });\r\n    } finally {\r\n      setBusy(false);\r\n      setTimeout(() => setToast(null), 4200);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <section className=\"relative\">\r\n      {/* Card */}\r\n      <div className=\"rounded-2xl border border-white/10 bg-white/[0.035] backdrop-blur-xl shadow-[0_8px_40px_-12px_rgba(99,102,241,0.25)] max-w-xl\">\r\n        <div className=\"px-5 py-4 border-b border-white/10 flex items-center gap-2\">\r\n          <div className=\"w-9 h-9 rounded-xl grid place-items-center bg-gradient-to-br from-lime-400/20 to-indigo-500/15 border border-white/10\">\r\n            <LockKeyhole size={16} />\r\n          </div>\r\n          <div className=\"font-medium\">Alterar senha</div>\r\n        </div>\r\n\r\n        <div className=\"p-5 space-y-4\">\r\n          {/* senha atual */}\r\n          <Field\r\n            label=\"Senha atual\"\r\n            type={showCurrent ? \"text\" : \"password\"}\r\n            value={current}\r\n            onChange={(e) => setCurrent(e.target.value)}\r\n            placeholder=\"Sua senha atual\"\r\n            right={\r\n              <IconBtn\r\n                title={showCurrent ? \"Ocultar\" : \"Mostrar\"}\r\n                onClick={() => setShowCurrent((v) => !v)}\r\n                icon={showCurrent ? EyeOff : Eye}\r\n              />\r\n            }\r\n          />\r\n\r\n          {/* nova senha */}\r\n          <div className=\"space-y-2\">\r\n            <Field\r\n              label=\"Nova senha\"\r\n              type={showNext ? \"text\" : \"password\"}\r\n              value={next}\r\n              onChange={(e) => setNext(e.target.value)}\r\n              placeholder=\"Nova senha\"\r\n              right={\r\n                <IconBtn\r\n                  title={showNext ? \"Ocultar\" : \"Mostrar\"}\r\n                  onClick={() => setShowNext((v) => !v)}\r\n                  icon={showNext ? EyeOff : Eye}\r\n                />\r\n              }\r\n            />\r\n\r\n            {/* medidor */}\r\n            <div className=\"space-y-1\">\r\n              <div className=\"flex items-center gap-1\">\r\n                <div className=\"flex-1 grid grid-cols-4 gap-1\">\r\n                  <div className={barClass(1)} />\r\n                  <div className={barClass(2)} />\r\n                  <div className={barClass(3)} />\r\n                  <div className={barClass(4)} />\r\n                </div>\r\n                <span className=\"text-xs opacity-75 w-20 text-right\">{st.label}</span>\r\n              </div>\r\n              <p className=\"text-xs opacity-70\">\r\n                Use 8+ caracteres e misture letras, números e símbolos.\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* confirmar */}\r\n          <Field\r\n            label=\"Confirmar nova senha\"\r\n            type={showConfirm ? \"text\" : \"password\"}\r\n            value={confirm}\r\n            onChange={(e) => setConfirm(e.target.value)}\r\n            placeholder=\"Repita a nova senha\"\r\n            right={\r\n              <IconBtn\r\n                title={showConfirm ? \"Ocultar\" : \"Mostrar\"}\r\n                onClick={() => setShowConfirm((v) => !v)}\r\n                icon={showConfirm ? EyeOff : Eye}\r\n              />\r\n            }\r\n          />\r\n\r\n          {/* checklist */}\r\n          <div className=\"mt-1 grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2 text-sm\">\r\n            <Req ok={okLen} label=\"Mínimo de 8 caracteres\" />\r\n            <Req ok={okLower} label=\"Letra minúscula\" />\r\n            <Req ok={okUpper} label=\"Letra maiúscula\" />\r\n            <Req ok={okNum} label=\"Número\" />\r\n            <Req ok={okSym} label=\"Símbolo\" />\r\n            <Req ok={same && !!next} label=\"As senhas coincidem\" />\r\n          </div>\r\n\r\n          <button\r\n            onClick={changePassword}\r\n            disabled={!canSubmit || busy}\r\n            className=\"w-full h-11 mt-2 rounded-xl inline-flex items-center justify-center gap-2 bg-gradient-to-r from-lime-400/20 to-indigo-500/20 border border-white/10 hover:from-lime-400/25 hover:to-indigo-500/25 transition disabled:opacity-60\"\r\n          >\r\n            {busy ? <Loader2 size={16} className=\"animate-spin\" /> : <ShieldCheck size={16} />}\r\n            {busy ? \"Salvando...\" : \"Salvar nova senha\"}\r\n          </button>\r\n\r\n          <p className=\"text-[12px] opacity-60 text-center mt-2\">\r\n            Por segurança, podemos solicitar a senha atual para confirmar a alteração.\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* toast */}\r\n      <AnimatePresence>\r\n        {toast && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 8 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: -8 }}\r\n            className={[\r\n              \"fixed bottom-6 right-6 z-40 rounded-xl px-3.5 py-2.5 text-sm shadow-xl border\",\r\n              toast.type === \"ok\"\r\n                ? \"bg-lime-500/15 border-lime-400/30 text-lime-200\"\r\n                : \"bg-red-500/15 border-red-400/30 text-red-200\",\r\n            ].join(\" \")}\r\n          >\r\n            <div className=\"flex items-center gap-2\">\r\n              {toast.type === \"ok\" ? <CheckCircle2 size={16} /> : <XCircle size={16} />}\r\n              <span>{toast.msg}</span>\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </section>\r\n  );\r\n}\r\n\r\n/* ------------------------ UI helpers ------------------------ */\r\n\r\nfunction Field({\r\n  label,\r\n  right,\r\n  className,\r\n  ...rest\r\n}: React.InputHTMLAttributes<HTMLInputElement> & { label: string; right?: React.ReactNode }) {\r\n  return (\r\n    <div className={className}>\r\n      <label className=\"block text-sm mb-1 opacity-80\">{label}</label>\r\n      <div className=\"relative\">\r\n        <input\r\n          {...rest}\r\n          className=\"w-full h-11 rounded-xl bg-white/[0.04] border border-white/10 px-3 pr-20 outline-none focus:ring-2 focus:ring-white/20\"\r\n        />\r\n        <div className=\"absolute right-1 top-1/2 -translate-y-1/2\">{right}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction IconBtn({\r\n  icon: Icon,\r\n  ...props\r\n}: React.ButtonHTMLAttributes<HTMLButtonElement> & { icon: any }) {\r\n  return (\r\n    <button\r\n      {...props}\r\n      className=\"h-9 px-3 inline-flex items-center gap-2 rounded-lg bg-white/5 border border-white/10 hover:bg-white/10 transition\"\r\n      type=\"button\"\r\n    >\r\n      <Icon size={16} />\r\n      <span className=\"text-xs\">Mostrar</span>\r\n    </button>\r\n  );\r\n}\r\n\r\nfunction Req({ ok, label }: { ok: boolean; label: string }) {\r\n  return (\r\n    <div className=\"flex items-center gap-2\">\r\n      {ok ? (\r\n        <CheckCircle2 size={14} className=\"text-lime-300\" />\r\n      ) : (\r\n        <XCircle size={14} className=\"text-white/40\" />\r\n      )}\r\n      <span className={ok ? \"opacity-90\" : \"opacity-60\"}>{label}</span>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,+BAA+B;;;;;;AAG/B;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AAfA;;;;;;;;AAsBA,SAAS,cAAc,GAAW;IAChC,IAAI,QAA2B;IAC/B,IAAI,CAAC,KAAK,OAAO;QAAE;QAAO,OAAO;IAAc;IAC/C,MAAM,MAAM,IAAI,MAAM,IAAI,KAAK,IAAI,IAAI,MAAM,IAAI,IAAI,IAAI;IACzD,MAAM,WAAW,QAAQ,IAAI,CAAC,OAAO,IAAI;IACzC,MAAM,WAAW,QAAQ,IAAI,CAAC,OAAO,IAAI;IACzC,MAAM,SAAS,KAAK,IAAI,CAAC,OAAO,IAAI;IACpC,MAAM,SAAS,eAAe,IAAI,CAAC,OAAO,IAAI;IAE9C,MAAM,OAAO,MAAM,WAAW,WAAW,SAAS;IAClD,IAAI,QAAQ,GAAG,QAAQ;SAClB,IAAI,SAAS,GAAG,QAAQ;SACxB,IAAI,SAAS,GAAG,QAAQ;SACxB,IAAI,SAAS,GAAG,QAAQ;SACxB,QAAQ;IAEb,MAAM,QACJ,UAAU,IAAI,cACd,UAAU,IAAI,UACd,UAAU,IAAI,UACd,UAAU,IAAI,UAAU;IAE1B,OAAO;QAAE;QAAO;IAAM;AACxB;AAEe,SAAS;IACtB,MAAM,WAAW,IAAA,gNAAO,EAAC,IAAM,IAAA,mJAAe,KAAI,EAAE;IACpD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,IAAA,kNAAS,EAAC;QACR,SAAS,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,CAAC,EAAE,IAAI,EAAE,GAAK,SAAS,KAAK,IAAI,EAAE,SAAS;IAC1E,GAAG;QAAC;KAAS;IAEb,qBACE,8OAAC,0IAAS;kBACR,cAAA,8OAAC,kJAAQ;sBACP,cAAA,8OAAC;gBAAK,WAAU;;kCAEd,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;;8CACC,8OAAC;oCAAG,WAAU;8CAAwC;;;;;;8CACtD,8OAAC;oCAAE,WAAU;8CAAkB;;;;;;;;;;;;;;;;;kCAOnC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC;gCAAI,WAAU;;;;;;;;;;;;kCAGjB,8OAAC;wBAAa,OAAO;;;;;;;;;;;;;;;;;;;;;;AAK/B;AAEA,SAAS,aAAa,EAAE,KAAK,EAA4B;IACvD,MAAM,WAAW,IAAA,gNAAO,EAAC,IAAM,IAAA,mJAAe,KAAI,EAAE;IAEpD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAE/C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAA6C;IAE/E,MAAM,KAAK,cAAc;IACzB,MAAM,QAAQ,KAAK,MAAM,IAAI;IAC7B,MAAM,UAAU,QAAQ,IAAI,CAAC;IAC7B,MAAM,UAAU,QAAQ,IAAI,CAAC;IAC7B,MAAM,QAAQ,KAAK,IAAI,CAAC;IACxB,MAAM,QAAQ,eAAe,IAAI,CAAC;IAClC,MAAM,OAAO,QAAQ,WAAW,SAAS;IAEzC,MAAM,YAAY,CAAC,CAAC,SAAS,CAAC,CAAC,WAAW,CAAC,CAAC,QAAQ,QAAQ,GAAG,KAAK,IAAI,KAAK;IAE7E,SAAS,SAAS,GAAW;QAC3B,MAAM,KAAK,GAAG,KAAK,IAAI;QACvB,MAAM,SAAS;YAAC;YAAgB;YAAmB;YAAmB;SAAiB;QACvF,OAAO;YACL;YACA,KAAK,MAAM,CAAC,KAAK,GAAG,CAAC,MAAI,GAAG,OAAO,MAAM,GAAC,GAAG,GAAG;SACjD,CAAC,IAAI,CAAC;IACT;IAEA,eAAe;QACb,IAAI,CAAC,OAAO;QACZ,QAAQ;QACR,SAAS;QACT,IAAI;YACF,iBAAiB;YACjB,MAAM,EAAE,OAAO,OAAO,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,kBAAkB,CAAC;gBAChE;gBACA,UAAU;YACZ;YACA,IAAI,SAAS,MAAM,IAAI,MAAM;YAE7B,oBAAoB;YACpB,MAAM,EAAE,OAAO,MAAM,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,UAAU,CAAC;gBAAE,UAAU;YAAK;YAC1E,IAAI,QAAQ,MAAM;YAElB,SAAS;gBAAE,MAAM;gBAAM,KAAK;YAA8B;YAC1D,WAAW;YAAK,QAAQ;YAAK,WAAW;QAC1C,EAAE,OAAO,GAAQ;YACf,SAAS;gBAAE,MAAM;gBAAO,KAAK,EAAE,OAAO,IAAI;YAAoC;QAChF,SAAU;YACR,QAAQ;YACR,WAAW,IAAM,SAAS,OAAO;QACnC;IACF;IAEA,qBACE,8OAAC;QAAQ,WAAU;;0BAEjB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,mOAAW;oCAAC,MAAM;;;;;;;;;;;0CAErB,8OAAC;gCAAI,WAAU;0CAAc;;;;;;;;;;;;kCAG/B,8OAAC;wBAAI,WAAU;;0CAEb,8OAAC;gCACC,OAAM;gCACN,MAAM,cAAc,SAAS;gCAC7B,OAAO;gCACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;gCAC1C,aAAY;gCACZ,qBACE,8OAAC;oCACC,OAAO,cAAc,YAAY;oCACjC,SAAS,IAAM,eAAe,CAAC,IAAM,CAAC;oCACtC,MAAM,cAAc,oNAAM,GAAG,uMAAG;;;;;;;;;;;0CAMtC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCACC,OAAM;wCACN,MAAM,WAAW,SAAS;wCAC1B,OAAO;wCACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;wCACvC,aAAY;wCACZ,qBACE,8OAAC;4CACC,OAAO,WAAW,YAAY;4CAC9B,SAAS,IAAM,YAAY,CAAC,IAAM,CAAC;4CACnC,MAAM,WAAW,oNAAM,GAAG,uMAAG;;;;;;;;;;;kDAMnC,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAI,WAAU;;0EACb,8OAAC;gEAAI,WAAW,SAAS;;;;;;0EACzB,8OAAC;gEAAI,WAAW,SAAS;;;;;;0EACzB,8OAAC;gEAAI,WAAW,SAAS;;;;;;0EACzB,8OAAC;gEAAI,WAAW,SAAS;;;;;;;;;;;;kEAE3B,8OAAC;wDAAK,WAAU;kEAAsC,GAAG,KAAK;;;;;;;;;;;;0DAEhE,8OAAC;gDAAE,WAAU;0DAAqB;;;;;;;;;;;;;;;;;;0CAOtC,8OAAC;gCACC,OAAM;gCACN,MAAM,cAAc,SAAS;gCAC7B,OAAO;gCACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;gCAC1C,aAAY;gCACZ,qBACE,8OAAC;oCACC,OAAO,cAAc,YAAY;oCACjC,SAAS,IAAM,eAAe,CAAC,IAAM,CAAC;oCACtC,MAAM,cAAc,oNAAM,GAAG,uMAAG;;;;;;;;;;;0CAMtC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,IAAI;wCAAO,OAAM;;;;;;kDACtB,8OAAC;wCAAI,IAAI;wCAAS,OAAM;;;;;;kDACxB,8OAAC;wCAAI,IAAI;wCAAS,OAAM;;;;;;kDACxB,8OAAC;wCAAI,IAAI;wCAAO,OAAM;;;;;;kDACtB,8OAAC;wCAAI,IAAI;wCAAO,OAAM;;;;;;kDACtB,8OAAC;wCAAI,IAAI,QAAQ,CAAC,CAAC;wCAAM,OAAM;;;;;;;;;;;;0CAGjC,8OAAC;gCACC,SAAS;gCACT,UAAU,CAAC,aAAa;gCACxB,WAAU;;oCAET,qBAAO,8OAAC,4NAAO;wCAAC,MAAM;wCAAI,WAAU;;;;;6DAAoB,8OAAC,mOAAW;wCAAC,MAAM;;;;;;oCAC3E,OAAO,gBAAgB;;;;;;;0CAG1B,8OAAC;gCAAE,WAAU;0CAA0C;;;;;;;;;;;;;;;;;;0BAO3D,8OAAC,4MAAe;0BACb,uBACC,8OAAC,oMAAM,CAAC,GAAG;oBACT,SAAS;wBAAE,SAAS;wBAAG,GAAG;oBAAE;oBAC5B,SAAS;wBAAE,SAAS;wBAAG,GAAG;oBAAE;oBAC5B,MAAM;wBAAE,SAAS;wBAAG,GAAG,CAAC;oBAAE;oBAC1B,WAAW;wBACT;wBACA,MAAM,IAAI,KAAK,OACX,oDACA;qBACL,CAAC,IAAI,CAAC;8BAEP,cAAA,8OAAC;wBAAI,WAAU;;4BACZ,MAAM,IAAI,KAAK,qBAAO,8OAAC,qOAAY;gCAAC,MAAM;;;;;qDAAS,8OAAC,uNAAO;gCAAC,MAAM;;;;;;0CACnE,8OAAC;0CAAM,MAAM,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO9B;AAEA,gEAAgE,GAEhE,SAAS,MAAM,EACb,KAAK,EACL,KAAK,EACL,SAAS,EACT,GAAG,MACsF;IACzF,qBACE,8OAAC;QAAI,WAAW;;0BACd,8OAAC;gBAAM,WAAU;0BAAiC;;;;;;0BAClD,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACE,GAAG,IAAI;wBACR,WAAU;;;;;;kCAEZ,8OAAC;wBAAI,WAAU;kCAA6C;;;;;;;;;;;;;;;;;;AAIpE;AAEA,SAAS,QAAQ,EACf,MAAM,IAAI,EACV,GAAG,OAC2D;IAC9D,qBACE,8OAAC;QACE,GAAG,KAAK;QACT,WAAU;QACV,MAAK;;0BAEL,8OAAC;gBAAK,MAAM;;;;;;0BACZ,8OAAC;gBAAK,WAAU;0BAAU;;;;;;;;;;;;AAGhC;AAEA,SAAS,IAAI,EAAE,EAAE,EAAE,KAAK,EAAkC;IACxD,qBACE,8OAAC;QAAI,WAAU;;YACZ,mBACC,8OAAC,qOAAY;gBAAC,MAAM;gBAAI,WAAU;;;;;qCAElC,8OAAC,uNAAO;gBAAC,MAAM;gBAAI,WAAU;;;;;;0BAE/B,8OAAC;gBAAK,WAAW,KAAK,eAAe;0BAAe;;;;;;;;;;;;AAG1D","debugId":null}}]
}