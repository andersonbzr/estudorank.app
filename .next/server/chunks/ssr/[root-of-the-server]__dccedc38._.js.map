{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/components/Sidebar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\nimport {\r\n  Trophy,\r\n  LayoutDashboard,\r\n  Settings,\r\n  ShieldCheck,\r\n  Shield,\r\n} from \"lucide-react\";\r\nimport Image from \"next/image\";\r\nimport clsx from \"clsx\";\r\n\r\ntype Props = {\r\n  onNavigate?: () => void;\r\n  isAdmin?: boolean;\r\n  /** Quando true, renderiza mini-rail (√≠cones apenas) no desktop */\r\n  collapsed?: boolean;\r\n};\r\n\r\ntype Item = { href: string; label: string; icon: React.ComponentType<any> };\r\n\r\nexport default function Sidebar({\r\n  onNavigate,\r\n  isAdmin,\r\n  collapsed = false,\r\n}: Props) {\r\n  const pathname = usePathname();\r\n\r\n  const items: Item[] = [\r\n    { href: \"/me\", label: \"Meu Painel\", icon: LayoutDashboard },\r\n    { href: \"/ranking\", label: \"Ranking\", icon: Trophy },\r\n    { href: \"/config\", label: \"Configura√ß√µes\", icon: Settings },\r\n    { href: \"/me/security\", label: \"Seguran√ßa\", icon: Shield },\r\n  ];\r\n  if (isAdmin) {\r\n    items.push({\r\n      href: \"/admin/courses\",\r\n      label: \"Administra√ß√£o\",\r\n      icon: ShieldCheck,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <aside className=\"h-screen sticky top-0 bg-[var(--surface)]/80 backdrop-blur-xl border-r border-white/10 flex flex-col\">\r\n      {/* Header */}\r\n      <div\r\n        className={clsx(\r\n          \"h-14 border-b border-white/10 px-4 flex items-center gap-2\",\r\n          collapsed && \"justify-center px-0\"\r\n        )}\r\n      >\r\n        <Link\r\n          href=\"/\"\r\n          className={clsx(\r\n            \"flex items-center gap-2 transition-transform hover:scale-[1.02]\",\r\n            collapsed && \"justify-center\"\r\n          )}\r\n          onClick={onNavigate}\r\n          aria-label=\"Ir para a p√°gina inicial\"\r\n        >\r\n          <Image\r\n            src=\"/logo.png\"\r\n            alt=\"EstudoRank\"\r\n            width={collapsed ? 22 : 28}\r\n            height={collapsed ? 22 : 28}\r\n            className=\"rounded-sm drop-shadow-[0_0_6px_rgba(163,230,53,0.30)]\"\r\n            priority\r\n          />\r\n          {!collapsed && (\r\n            <span className=\"font-semibold tracking-tight\">EstudoRank</span>\r\n          )}\r\n        </Link>\r\n      </div>\r\n\r\n      {/* Navega√ß√£o */}\r\n      <nav className={clsx(\"flex-1 p-2 space-y-2\", collapsed && \"p-2\")}>\r\n        {items.map((item) => {\r\n          const active =\r\n            pathname === item.href || pathname.startsWith(`${item.href}/`);\r\n          return (\r\n            <NavItem\r\n              key={item.href}\r\n              item={item}\r\n              active={active}\r\n              collapsed={collapsed}\r\n              onNavigate={onNavigate}\r\n            />\r\n          );\r\n        })}\r\n      </nav>\r\n\r\n      {/* Footer */}\r\n      {!collapsed ? (\r\n        <div className=\"px-3 py-3 text-xs opacity-60 border-t border-white/10\">\r\n          ¬© {new Date().getFullYear()} EstudoRank\r\n        </div>\r\n      ) : (\r\n        <div className=\"py-3 border-t border-white/10 text-center text-[10px] opacity-50 select-none\">\r\n          ¬© {new Date().getFullYear()}\r\n        </div>\r\n      )}\r\n    </aside>\r\n  );\r\n}\r\n\r\n/* --------------------------- Subcomponentes --------------------------- */\r\n\r\nfunction NavItem({\r\n  item,\r\n  active,\r\n  collapsed,\r\n  onNavigate,\r\n}: {\r\n  item: Item;\r\n  active: boolean;\r\n  collapsed: boolean;\r\n  onNavigate?: () => void;\r\n}) {\r\n  const Icon = item.icon;\r\n\r\n  return (\r\n    <Link\r\n      href={item.href}\r\n      onClick={onNavigate}\r\n      aria-current={active ? \"page\" : undefined}\r\n      className={clsx(\r\n        \"group relative flex items-center gap-2 rounded-2xl border transition-all duration-200 outline-none focus-visible:ring-2 focus-visible:ring-indigo-400/40\",\r\n        collapsed ? \"justify-center p-2\" : \"px-3 py-2\",\r\n        active\r\n          ? // ‚úÖ destaque do ativo: ‚Äúpill‚Äù com leve gradiente + glow\r\n            \"bg-gradient-to-br from-lime-400/15 to-indigo-500/10 border-white/25 shadow-[0_0_0_1px_rgba(255,255,255,0.06),0_8px_24px_-8px_rgba(99,102,241,0.25)] text-lime-200\"\r\n          : \"bg-white/5 hover:bg-white/10 border-white/10 text-white/85 hover:text-white\"\r\n      )}\r\n    >\r\n      {/* √çcone */}\r\n      <Icon\r\n        size={18}\r\n        className={clsx(\r\n          \"transition-transform\",\r\n          active ? \"scale-[1.02]\" : \"group-hover:scale-105\"\r\n        )}\r\n        aria-hidden\r\n      />\r\n\r\n      {/* Label (s√≥ no modo expandido) */}\r\n      {!collapsed && <span className=\"text-sm\">{item.label}</span>}\r\n\r\n      {/* Tooltip custom (apenas no modo colapsado) */}\r\n      {collapsed && (\r\n        <span\r\n          className={clsx(\r\n            \"pointer-events-none absolute left-full ml-3 top-1/2 -translate-y-1/2\",\r\n            \"rounded-md bg-black/80 text-white text-xs px-2 py-1\",\r\n            \"opacity-0 translate-x-[-4px] group-hover:opacity-100 group-hover:translate-x-0\",\r\n            \"transition-all whitespace-nowrap z-50\"\r\n          )}\r\n          role=\"tooltip\"\r\n        >\r\n          {item.label}\r\n        </span>\r\n      )}\r\n    </Link>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AAZA;;;;;;;AAuBe,SAAS,QAAQ,EAC9B,UAAU,EACV,OAAO,EACP,YAAY,KAAK,EACX;IACN,MAAM,WAAW,IAAA,iJAAW;IAE5B,MAAM,QAAgB;QACpB;YAAE,MAAM;YAAO,OAAO;YAAc,MAAM,+OAAe;QAAC;QAC1D;YAAE,MAAM;YAAY,OAAO;YAAW,MAAM,gNAAM;QAAC;QACnD;YAAE,MAAM;YAAW,OAAO;YAAiB,MAAM,sNAAQ;QAAC;QAC1D;YAAE,MAAM;YAAgB,OAAO;YAAa,MAAM,gNAAM;QAAC;KAC1D;IACD,IAAI,SAAS;QACX,MAAM,IAAI,CAAC;YACT,MAAM;YACN,OAAO;YACP,MAAM,mOAAW;QACnB;IACF;IAEA,qBACE,8OAAC;QAAM,WAAU;;0BAEf,8OAAC;gBACC,WAAW,IAAA,gJAAI,EACb,8DACA,aAAa;0BAGf,cAAA,8OAAC,uKAAI;oBACH,MAAK;oBACL,WAAW,IAAA,gJAAI,EACb,mEACA,aAAa;oBAEf,SAAS;oBACT,cAAW;;sCAEX,8OAAC,wIAAK;4BACJ,KAAI;4BACJ,KAAI;4BACJ,OAAO,YAAY,KAAK;4BACxB,QAAQ,YAAY,KAAK;4BACzB,WAAU;4BACV,QAAQ;;;;;;wBAET,CAAC,2BACA,8OAAC;4BAAK,WAAU;sCAA+B;;;;;;;;;;;;;;;;;0BAMrD,8OAAC;gBAAI,WAAW,IAAA,gJAAI,EAAC,wBAAwB,aAAa;0BACvD,MAAM,GAAG,CAAC,CAAC;oBACV,MAAM,SACJ,aAAa,KAAK,IAAI,IAAI,SAAS,UAAU,CAAC,GAAG,KAAK,IAAI,CAAC,CAAC,CAAC;oBAC/D,qBACE,8OAAC;wBAEC,MAAM;wBACN,QAAQ;wBACR,WAAW;wBACX,YAAY;uBAJP,KAAK,IAAI;;;;;gBAOpB;;;;;;YAID,CAAC,0BACA,8OAAC;gBAAI,WAAU;;oBAAwD;oBAClE,IAAI,OAAO,WAAW;oBAAG;;;;;;qCAG9B,8OAAC;gBAAI,WAAU;;oBAA+E;oBACzF,IAAI,OAAO,WAAW;;;;;;;;;;;;;AAKnC;AAEA,0EAA0E,GAE1E,SAAS,QAAQ,EACf,IAAI,EACJ,MAAM,EACN,SAAS,EACT,UAAU,EAMX;IACC,MAAM,OAAO,KAAK,IAAI;IAEtB,qBACE,8OAAC,uKAAI;QACH,MAAM,KAAK,IAAI;QACf,SAAS;QACT,gBAAc,SAAS,SAAS;QAChC,WAAW,IAAA,gJAAI,EACb,4JACA,YAAY,uBAAuB,aACnC,SAEI,sKACA;;0BAIN,8OAAC;gBACC,MAAM;gBACN,WAAW,IAAA,gJAAI,EACb,wBACA,SAAS,iBAAiB;gBAE5B,aAAW;;;;;;YAIZ,CAAC,2BAAa,8OAAC;gBAAK,WAAU;0BAAW,KAAK,KAAK;;;;;;YAGnD,2BACC,8OAAC;gBACC,WAAW,IAAA,gJAAI,EACb,wEACA,uDACA,kFACA;gBAEF,MAAK;0BAEJ,KAAK,KAAK;;;;;;;;;;;;AAKrB","debugId":null}},
    {"offset": {"line": 246, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/lib/supabase/client.ts"],"sourcesContent":["// src/lib/supabase/client.ts\r\nimport { createClient, type SupabaseClient } from \"@supabase/supabase-js\";\r\n\r\nlet _client: SupabaseClient | null = null;\r\n\r\n/**\r\n * Cliente do Supabase para uso no browser (componentes client).\r\n * Usa storageKey custom \"sr-auth\" para evitar conflitos e manter sess√£o.\r\n */\r\nexport function supabaseBrowser(): SupabaseClient {\r\n  if (_client) return _client;\r\n\r\n  const url = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\n  const anon = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\r\n\r\n  if (!url || !anon) {\r\n    throw new Error(\r\n      \"Env vars ausentes: defina NEXT_PUBLIC_SUPABASE_URL e NEXT_PUBLIC_SUPABASE_ANON_KEY.\"\r\n    );\r\n  }\r\n\r\n  _client = createClient(url, anon, {\r\n    auth: {\r\n      persistSession: true,\r\n      autoRefreshToken: true,\r\n      storageKey: \"sr-auth\",\r\n    },\r\n  });\r\n\r\n  return _client;\r\n}\r\n"],"names":[],"mappings":"AAAA,6BAA6B;;;;;AAC7B;;AAEA,IAAI,UAAiC;AAM9B,SAAS;IACd,IAAI,SAAS,OAAO;IAEpB,MAAM;IACN,MAAM;IAEN;;IAMA,UAAU,IAAA,uMAAY,EAAC,KAAK,MAAM;QAChC,MAAM;YACJ,gBAAgB;YAChB,kBAAkB;YAClB,YAAY;QACd;IACF;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 273, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/components/I18nProvider.tsx"],"sourcesContent":["// src/components/I18nProvider.tsx\r\n\"use client\";\r\n\r\nimport React, { createContext, useContext, useEffect, useMemo, useState } from \"react\";\r\n\r\n/**\r\n * Dicion√°rios simples. Mantive pt-BR como padr√£o.\r\n * Se quiser, pode preencher/enxugar o en-US ‚Äî o app vai cair no pt-BR quando faltar chave.\r\n */\r\ntype Dict = Record<string, string | ((vars?: Record<string, any>) => string)>;\r\n\r\nconst ptBR: Dict = {\r\n  // Globais / Header / Sidebar\r\n  welcome: ({ name }: any) => (name ? `Bem-vindo, ${name}` : \"Bem-vindo\"),\r\n  myPanel: \"Meu Painel\",\r\n  ranking: \"Ranking\",\r\n  settings: \"Configura√ß√µes\",\r\n  admin: \"Admin\",\r\n  refresh: \"Atualizar\",\r\n  prev: \"Anterior\",\r\n  next: \"Pr√≥xima\",\r\n  signOut: \"Sair\",\r\n\r\n  // P√°gina /me\r\n  yourPoints: \"Seus pontos:\",\r\n  creatingExample: \"Criando exemplo...\",\r\n  createExample: \"Criar dados de exemplo\",\r\n  weeklyGoalLabel: ({ done, goal }: any) => `Meta semanal (seg‚Äìdom): ${done}/${goal} m√≥dulos`,\r\n  saveGoal: \"Salvar meta\",\r\n  generalProgress: \"Progresso geral\",\r\n  modulesCompleted: ({ done, total }: any) => `${done}/${total} m√≥dulos conclu√≠dos`,\r\n  loadingCoursesModules: \"Carregando cursos e m√≥dulos...\",\r\n  noActiveCourses: \"Nenhum curso ativo. Use ‚ÄúCriar dados de exemplo‚Äù.\",\r\n  donePlusPoints: \"Conclu√≠do (+10 pts)\",\r\n  pending: \"Pendente\",\r\n  updating: \"Atualizando...\",\r\n  undo: \"Desfazer\",\r\n  conclude: \"Concluir\",\r\n\r\n  // Admin / Cursos\r\n  adminCoursesTitle: \"Admin ‚Ä¢ Cursos & M√≥dulos\",\r\n  adminCoursesSubtitle:\r\n    \"Crie cursos, adicione m√≥dulos, ative/desative e edite t√≠tulos. Somente administradores podem alterar.\",\r\n  demoMode: \"Modo Demo\",\r\n  demoModeDesc: \"Popula v√°rios cursos e m√≥dulos de exemplo.\",\r\n  populating: \"Populando...\",\r\n  populateDemo: \"Popular demo\",\r\n  newCourse: \"Novo curso\",\r\n  courseTitlePlaceholder: \"T√≠tulo do curso\",\r\n  courseDescPlaceholder: \"Descri√ß√£o (opcional)\",\r\n  creating: \"Criando...\",\r\n  createCourse: \"Criar curso\",\r\n  titleLabel: \"T√≠tulo\",\r\n  disable: \"Desativar\",\r\n  enable: \"Ativar\",\r\n  delete: \"Excluir\",\r\n  modulePlaceholder: \"Novo m√≥dulo...\",\r\n  addModule: \"Adicionar m√≥dulo\",\r\n  adding: \"Adicionando...\",\r\n  moduleLabel: \"M√≥dulo\",\r\n  save: \"Salvar\",\r\n  cancel: \"Cancelar\",\r\n  edit: \"Editar\",\r\n  loading: \"Carregando...\",\r\n  noCourses: \"Nenhum curso. Crie um acima.\",\r\n\r\n  // Ranking\r\n  position: \"Posi√ß√£o\",\r\n  user: \"Usu√°rio\",\r\n  points: \"Pontos\",\r\n  loadingRanking: \"Carregando ranking...\",\r\n  noDataYet: \"Sem dados ainda.\",\r\n  paginationSummary: ({ total, page, pages }: any) => `${total} usu√°rios ‚Ä¢ p√°gina ${page} de ${pages}`,\r\n};\r\n\r\nconst enUS: Dict = {\r\n  // (opcional, serve como fallback para quando voc√™ selecionar \"en-US\" no futuro)\r\n  welcome: ({ name }: any) => (name ? `Welcome, ${name}` : \"Welcome\"),\r\n  myPanel: \"My Panel\",\r\n  ranking: \"Ranking\",\r\n  settings: \"Settings\",\r\n  admin: \"Admin\",\r\n  refresh: \"Refresh\",\r\n  prev: \"Previous\",\r\n  next: \"Next\",\r\n  signOut: \"Sign out\",\r\n};\r\n\r\nexport type Locale = \"pt-BR\" | \"en-US\";\r\n\r\nconst dictionaries: Record<Locale, Dict> = {\r\n  \"pt-BR\": ptBR,\r\n  \"en-US\": enUS,\r\n};\r\n\r\ntype I18nCtxType = {\r\n  locale: Locale;\r\n  setLocale: (l: Locale) => void;\r\n  t: (key: string, vars?: Record<string, any>) => string;\r\n};\r\n\r\nconst I18nCtx = createContext<I18nCtxType | null>(null);\r\n\r\nexport function I18nProvider({ children }: { children: React.ReactNode }) {\r\n  // Se n√£o for usar troca de idioma agora, deixe fixo em 'pt-BR'\r\n  const [locale, setLocaleState] = useState<Locale>(\"pt-BR\");\r\n\r\n  // Mant√©m o atributo lang coerente (n√£o √© obrigat√≥rio, mas ajuda em SEO/acessibilidade)\r\n  useEffect(() => {\r\n    document.documentElement.setAttribute(\"lang\", locale);\r\n  }, [locale]);\r\n\r\n  // Exponho setLocale para compatibilidade futura (hoje pode ficar sem uso)\r\n  const setLocale = (l: Locale) => {\r\n    setLocaleState(l);\r\n  };\r\n\r\n  // Tradutor com fallback para pt-BR e, por fim, a pr√≥pria chave\r\n  const t = useMemo(() => {\r\n    return (key: string, vars?: Record<string, any>) => {\r\n      const dict = dictionaries[locale] || ptBR;\r\n      const entry = dict[key];\r\n      if (typeof entry === \"function\") return (entry as any)(vars || {});\r\n      if (typeof entry === \"string\") return entry;\r\n\r\n      const fb = ptBR[key];\r\n      if (typeof fb === \"function\") return (fb as any)(vars || {});\r\n      if (typeof fb === \"string\") return fb;\r\n\r\n      return key;\r\n    };\r\n  }, [locale]);\r\n\r\n  const value = useMemo(() => ({ locale, setLocale, t }), [locale, t]);\r\n\r\n  return <I18nCtx.Provider value={value}>{children}</I18nCtx.Provider>;\r\n}\r\n\r\nexport function useI18n() {\r\n  const ctx = useContext(I18nCtx);\r\n  if (!ctx) throw new Error(\"useI18n must be used within I18nProvider\");\r\n  return ctx;\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 415, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/components/shell/AppShell.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { ReactNode, useEffect, useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport Sidebar from \"@/components/Sidebar\";\r\nimport { Menu, LogOut, Shield } from \"lucide-react\";\r\nimport { supabaseBrowser } from \"@/lib/supabase/client\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { I18nProvider } from \"@/components/I18nProvider\";\r\n\r\nexport default function AppShell({ children }: { children: ReactNode }) {\r\n  const [open, setOpen] = useState(true);              // desktop: expandida (true) / rail (false)\r\n  const [mobileOpen, setMobileOpen] = useState(false); // mobile drawer\r\n  const [displayName, setDisplayName] = useState<string | null>(null);\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const supabase = supabaseBrowser();\r\n    supabase.auth.getUser().then(async ({ data }) => {\r\n      const u = data.user;\r\n      if (u) {\r\n        const { data: prof } = await supabase\r\n          .from(\"profiles\")\r\n          .select(\"is_admin, full_name, name\")\r\n          .eq(\"id\", u.id)\r\n          .single();\r\n\r\n        setIsAdmin(!!prof?.is_admin);\r\n        const name =\r\n          (prof?.full_name && String(prof.full_name).trim()) ||\r\n          (prof?.name && String(prof.name).trim()) ||\r\n          u.email ||\r\n          null;\r\n        setDisplayName(name);\r\n      } else {\r\n        setIsAdmin(false);\r\n        setDisplayName(null);\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  async function signOut() {\r\n    const supabase = supabaseBrowser();\r\n    await supabase.auth.signOut();\r\n    router.replace(\"/login\");\r\n  }\r\n\r\n  function handleNavigate() {\r\n    setMobileOpen(false);\r\n  }\r\n\r\n  // Largura da 1¬™ coluna no desktop: 18rem (aberta) / 4rem (rail colapsada)\r\n  const desktopCol = open ? \"18rem\" : \"4rem\";\r\n\r\n  return (\r\n    <I18nProvider>\r\n      <div\r\n        className=\"min-h-screen w-full grid\"\r\n        style={{ gridTemplateColumns: `${desktopCol} 1fr` }}\r\n      >\r\n        {/* Sidebar Desktop */}\r\n        <div className=\"hidden lg:block border-r border-white/10 bg-[var(--surface)]/70 backdrop-blur-xl\">\r\n          <Sidebar isAdmin={isAdmin} collapsed={!open} />\r\n        </div>\r\n\r\n        {/* Conte√∫do */}\r\n        <div className=\"min-h-screen flex flex-col\">\r\n          {/* Topbar */}\r\n          <header className=\"sticky top-0 z-30 h-14 border-b border-white/10 bg-[var(--surface)]/70 backdrop-blur flex items-center justify-between px-3 sm:px-4 lg:px-6\">\r\n            <div className=\"flex items-center gap-2\">\r\n              {/* Toggle Mobile Drawer */}\r\n              <button\r\n                className=\"btn-icon lg:hidden\"\r\n                onClick={() => setMobileOpen(true)}\r\n                aria-label=\"Abrir menu\"\r\n              >\r\n                <Menu size={18} />\r\n              </button>\r\n\r\n              {/* Toggle largura sidebar (desktop) */}\r\n              <button\r\n                className=\"btn-icon hidden lg:inline-flex\"\r\n                onClick={() => setOpen((v) => !v)}\r\n                aria-label={open ? \"Recolher menu\" : \"Expandir menu\"}\r\n                title={open ? \"Recolher menu\" : \"Expandir menu\"}\r\n              >\r\n                <Menu size={18} />\r\n              </button>\r\n\r\n              <span className=\"text-sm opacity-80 hidden sm:block\">\r\n                {displayName ? `Bem-vindo, ${displayName}` : \"Bem-vindo\"}\r\n              </span>\r\n            </div>\r\n\r\n            {/* A√ß√µes √† direita */}\r\n            <div className=\"flex items-center gap-2\">\r\n              <Link href=\"/me/security\" className=\"btn btn-outline\" title=\"Seguran√ßa da conta\">\r\n                <Shield size={16} />\r\n                <span className=\"hidden sm:inline\">Seguran√ßa</span>\r\n              </Link>\r\n\r\n              <button onClick={signOut} className=\"btn btn-outline\" title=\"Sair\">\r\n                <LogOut size={16} />\r\n                <span className=\"hidden sm:inline\">Sair</span>\r\n              </button>\r\n            </div>\r\n          </header>\r\n\r\n          <main className=\"flex-1 p-4 sm:p-6 lg:p-8\">{children}</main>\r\n        </div>\r\n\r\n        {/* Drawer Mobile */}\r\n        {mobileOpen && (\r\n          <div className=\"lg:hidden fixed inset-0 z-40\">\r\n            {/* overlay */}\r\n            <button\r\n              className=\"absolute inset-0 bg-black/50\"\r\n              onClick={() => setMobileOpen(false)}\r\n              aria-label=\"Fechar menu\"\r\n            />\r\n            <div className=\"absolute left-0 top-0 h-full w-72 bg-[var(--surface)]/90 border-r border-white/10 shadow-xl\">\r\n              <Sidebar isAdmin={isAdmin} onNavigate={handleNavigate} />\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </I18nProvider>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 677, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/app/ranking/page.tsx"],"sourcesContent":["// src/app/ranking/page.tsx\r\n\"use client\";\r\n\r\nimport { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport AppShell from \"@/components/shell/AppShell\";\r\nimport { supabaseBrowser } from \"@/lib/supabase/client\";\r\n\r\n/* =========================\r\n   Tipos do endpoint\r\n========================= */\r\ntype RankItem = {\r\n  user_id: string;\r\n  name?: string | null;\r\n  email?: string | null;\r\n  points: number;\r\n  total: number; // alias\r\n  last_completed_at?: string | null; // se sua API enviar\r\n  trend?: number; // se sua API enviar\r\n};\r\ntype ApiResp = {\r\n  ok: boolean;\r\n  leaderboard: RankItem[];\r\n  page: number;\r\n  pageSize: number;\r\n  total: number;\r\n  pages: number;\r\n  updatedAt?: string;\r\n};\r\n\r\n/* =========================\r\n   Utils visuais\r\n========================= */\r\nfunction Avatar({ name }: { name?: string | null }) {\r\n  const initials = (name || \"??\")\r\n    .split(\" \")\r\n    .filter(Boolean)\r\n    .slice(0, 2)\r\n    .map((s) => s[0]?.toUpperCase())\r\n    .join(\"\");\r\n  return (\r\n    <div className=\"h-10 w-10 rounded-full bg-white/10 border border-white/10 flex items-center justify-center text-sm\">\r\n      {initials || \"?\"}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction RankSkeletonRow() {\r\n  return (\r\n    <li className=\"grid grid-cols-[90px_1fr_160px_140px_180px] gap-3 px-6 py-4 animate-pulse\">\r\n      <div className=\"h-3 w-8 bg-white/10 rounded\" />\r\n      <div className=\"flex items-center gap-3\">\r\n        <div className=\"h-10 w-10 rounded-full bg-white/10\" />\r\n        <div className=\"h-3 w-48 bg-white/10 rounded\" />\r\n      </div>\r\n      <div className=\"h-3 w-16 bg-white/10 rounded\" />\r\n      <div className=\"h-3 w-10 bg-white/10 rounded\" />\r\n      <div className=\"h-3 w-24 bg-white/10 rounded\" />\r\n    </li>\r\n  );\r\n}\r\n\r\nfunction RankEmpty() {\r\n  return (\r\n    <div className=\"px-6 py-12 text-center text-white/60\">\r\n      Ainda n√£o h√° participantes no ranking.\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction RankRow({\r\n  me,\r\n  i,\r\n  name,\r\n  points,\r\n  lastActive,\r\n  trend = 0,\r\n}: {\r\n  me?: boolean;\r\n  i: number;\r\n  name?: string | null;\r\n  points: number;\r\n  lastActive?: string | null;\r\n  trend?: number;\r\n}) {\r\n  const arrow = trend === 0 ? \"‚Äî\" : trend > 0 ? \"‚Üë\" : \"‚Üì\";\r\n  return (\r\n    <li\r\n      className={`grid grid-cols-[90px_1fr_160px_140px_180px] items-center gap-3 px-6 py-4\r\n                  hover:bg-white/[0.04] transition-colors\r\n                  ${me ? \"bg-lime-400/5 ring-1 ring-lime-300/20\" : \"\"}`}\r\n    >\r\n      <div className=\"text-sm text-white/60\">#{i}</div>\r\n      <div className=\"flex items-center gap-3\">\r\n        <Avatar name={name} />\r\n        <div className=\"font-medium text-white/90 line-clamp-1\">{name || \"Sem nome\"}</div>\r\n      </div>\r\n      <div className=\"text-white/80\">{points} pts</div>\r\n      <div\r\n        className={`text-sm ${\r\n          trend > 0 ? \"text-lime-300\" : trend < 0 ? \"text-rose-300\" : \"text-white/50\"\r\n        }`}\r\n      >\r\n        {arrow} {trend !== 0 ? Math.abs(trend) : \"\"}\r\n      </div>\r\n      <div className=\"text-sm text-white/60\">\r\n        {lastActive ? new Date(lastActive).toLocaleDateString(\"pt-BR\") : \"‚Äî\"}\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n\r\n/* =========================\r\n   P√≥dio Top-3\r\n========================= */\r\nfunction Podium({ items }: { items: RankItem[] }) {\r\n  const [first, second, third] = items;\r\n\r\n  const Medal = ({ i }: { i: number }) => (\r\n    <span\r\n      className={`text-xs px-2 py-0.5 rounded-md border\r\n      ${\r\n        i === 1\r\n          ? \"bg-yellow-400/15 border-yellow-300/30 text-yellow-200\"\r\n          : i === 2\r\n          ? \"bg-slate-300/15 border-slate-200/30 text-slate-200\"\r\n          : \"bg-amber-700/15 border-amber-700/30 text-amber-300\"\r\n      }`}\r\n    >\r\n      {i === 1 ? \"ü•á 1¬∫\" : i === 2 ? \"ü•à 2¬∫\" : \"ü•â 3¬∫\"}\r\n    </span>\r\n  );\r\n\r\n  if (!first) return null;\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-3 gap-4 mt-6\">\r\n      {/* 2¬∫ */}\r\n      <div className=\"rounded-2xl p-4 bg-white/[0.03] border border-white/10 flex flex-col items-center justify-center\">\r\n        {second ? (\r\n          <>\r\n            <Medal i={2} />\r\n            <div className=\"mt-3\">\r\n              <Avatar name={second.name} />\r\n            </div>\r\n            <div className=\"mt-2 text-sm text-white/80 text-center line-clamp-1\">{second.name}</div>\r\n            <div className=\"text-xs text-white/60\">{second.points} pts</div>\r\n          </>\r\n        ) : (\r\n          <div className=\"h-20\" />\r\n        )}\r\n      </div>\r\n\r\n      {/* 1¬∫ */}\r\n      <div className=\"rounded-2xl p-5 bg-gradient-to-b from-neutral-900 to-black border border-white/10 flex flex-col items-center justify-center shadow-[0_0_20px_rgba(163,230,53,0.08)]\">\r\n        <Medal i={1} />\r\n        <div className=\"mt-3 scale-110\">\r\n          <Avatar name={first.name} />\r\n        </div>\r\n        <div className=\"mt-2 text-white text-center font-medium line-clamp-1\">{first.name}</div>\r\n        <div className=\"text-sm text-lime-300\">{first.points} pts</div>\r\n      </div>\r\n\r\n      {/* 3¬∫ */}\r\n      <div className=\"rounded-2xl p-4 bg-white/[0.03] border border-white/10 flex flex-col items-center justify-center\">\r\n        {third ? (\r\n          <>\r\n            <Medal i={3} />\r\n            <div className=\"mt-3\">\r\n              <Avatar name={third.name} />\r\n            </div>\r\n            <div className=\"mt-2 text-sm text-white/80 text-center line-clamp-1\">{third.name}</div>\r\n            <div className=\"text-xs text-white/60\">{third.points} pts</div>\r\n          </>\r\n        ) : (\r\n          <div className=\"h-20\" />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* =========================\r\n   Chat em tempo real (Supabase Realtime)\r\n========================= */\r\nfunction ChatPanel() {\r\n  const supabase = useMemo(() => supabaseBrowser(), []);\r\n  const [connected, setConnected] = useState(false);\r\n  const [participants, setParticipants] = useState(0);\r\n  const [messages, setMessages] = useState<{ id: string; user?: string; text: string }[]>([]);\r\n  const [text, setText] = useState(\"\");\r\n  const listRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const channel = supabase.channel(\"ranking-global\", {\r\n      config: { broadcast: { self: true }, presence: { key: Math.random().toString(36).slice(2) } },\r\n    });\r\n\r\n    channel\r\n      .on(\"presence\", { event: \"sync\" }, () => {\r\n        const state = channel.presenceState();\r\n        const count = Object.values(state).reduce((acc, arr: any) => acc + (arr as any[]).length, 0);\r\n        setParticipants(count);\r\n        setConnected(true);\r\n      })\r\n      .on(\"broadcast\", { event: \"message\" }, (payload) => {\r\n        const m = payload.payload as { id: string; user?: string; text: string };\r\n        setMessages((s) => [...s, m]);\r\n      })\r\n      .subscribe(async (status) => {\r\n        if (status === \"SUBSCRIBED\") {\r\n          await channel.track({ online_at: new Date().toISOString() });\r\n        }\r\n      });\r\n\r\n    return () => {\r\n      supabase.removeChannel(channel);\r\n    };\r\n  }, [supabase]);\r\n\r\n  useEffect(() => {\r\n    listRef.current?.scrollTo({ top: 999999, behavior: \"smooth\" });\r\n  }, [messages]);\r\n\r\n  async function sendMessage() {\r\n    const t = text.trim();\r\n    if (!t) return;\r\n    const m = { id: crypto.randomUUID(), text: t };\r\n    await supabase.channel(\"ranking-global\").send({\r\n      type: \"broadcast\",\r\n      event: \"message\",\r\n      payload: m,\r\n    });\r\n    setText(\"\");\r\n  }\r\n\r\n  return (\r\n    <div className=\"rounded-2xl overflow-hidden border border-white/10 bg-white/[0.03] flex flex-col h-full\">\r\n      <div className=\"px-4 py-3 border-b border-white/10 text-white/80 text-sm flex items-center justify-between\">\r\n        <div>\r\n          <div className=\"font-medium\">Chat do Ranking</div>\r\n          <div className=\"text-xs text-white/60\">\r\n            {connected ? (\r\n              <>\r\n                <span className=\"inline-flex h-2 w-2 rounded-full bg-lime-400 mr-1.5 align-middle\" />\r\n                Conectado a <span className=\"font-mono\">ranking-global</span>\r\n              </>\r\n            ) : (\r\n              \"Conectando‚Ä¶\"\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className=\"text-xs px-2 py-1 rounded-md bg-white/10 border border-white/10\">\r\n          {participants} participantes\r\n        </div>\r\n      </div>\r\n\r\n      <div ref={listRef} className=\"flex-1 overflow-auto px-4 py-3 space-y-3\">\r\n        {messages.length === 0 ? (\r\n          <div className=\"text-sm text-white/50\">Sem mensagens ainda.</div>\r\n        ) : (\r\n          messages.map((m) => (\r\n            <div key={m.id} className=\"flex items-start gap-2\">\r\n              <div className=\"h-7 w-7 rounded-full bg-white/10 border border-white/10 flex items-center justify-center text-[11px]\">\r\n                U\r\n              </div>\r\n              <div className=\"max-w-[80%] rounded-xl bg-white/10 border border-white/10 px-3 py-2 text-sm\">\r\n                {m.text}\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n\r\n      <form\r\n        onSubmit={(e) => {\r\n          e.preventDefault();\r\n          sendMessage();\r\n        }}\r\n        className=\"p-3 border-t border-white/10 flex items-center gap-2\"\r\n      >\r\n        <input\r\n          value={text}\r\n          onChange={(e) => setText(e.target.value)}\r\n          placeholder=\"Escreva uma mensagem‚Ä¶\"\r\n          className=\"flex-1 bg-black/40 border border-white/10 rounded-full px-3 py-2 text-sm outline-none focus:border-white/20\"\r\n        />\r\n        <button\r\n          type=\"submit\"\r\n          className=\"text-sm px-3 py-2 rounded-full bg-white/10 border border-white/10 hover:bg-white/15\"\r\n        >\r\n          Enviar\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* =========================\r\n   P√°gina principal\r\n========================= */\r\nexport default function RankingPage() {\r\n  const [loading, setLoading] = useState(true);\r\n  const [items, setItems] = useState<RankItem[]>([]);\r\n  const [page, setPage] = useState(1);\r\n  const [pages, setPages] = useState(1);\r\n  const [participants, setParticipants] = useState(0);\r\n  const [updatedAt, setUpdatedAt] = useState<string | undefined>(undefined);\r\n\r\n  const currentUserIdRef = useRef<string | null>(null); // se quiser destacar \"eu\"\r\n\r\n  async function fetchRanking(p = page) {\r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch(`/api/ranking?page=${p}&pageSize=25`, { cache: \"no-store\" });\r\n      const json: ApiResp = await res.json();\r\n      if (json.ok) {\r\n        setItems(json.leaderboard);\r\n        setPages(json.pages);\r\n        setParticipants(json.total);\r\n        setUpdatedAt(json.updatedAt);\r\n      } else {\r\n        setItems([]);\r\n      }\r\n    } catch {\r\n      setItems([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchRanking(page);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [page]);\r\n\r\n  const top3 = items.slice(0, 3);\r\n\r\n  return (\r\n    <AppShell>\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-[1.6fr_1fr] gap-6 px-5 md:px-8 py-8\">\r\n        {/* ======= Coluna esquerda: Ranking ======= */}\r\n        <div>\r\n          {/* Hero */}\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 8 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            className=\"relative overflow-hidden rounded-3xl p-6 md:p-8\r\n                       bg-gradient-to-b from-neutral-900 to-black\r\n                       shadow-[inset_0_0_0_1px_rgba(255,255,255,0.05)]\"\r\n          >\r\n            <div className=\"flex items-start justify-between gap-4 flex-wrap\">\r\n              <div>\r\n                <h1 className=\"text-2xl md:text-3xl font-semibold text-white/90\">Ranking Geral</h1>\r\n                <p className=\"text-white/60 mt-1\">Veja quem est√° subindo no topo</p>\r\n                <div className=\"mt-3 flex flex-wrap items-center gap-2\">\r\n                  <span className=\"text-[11px] px-2 py-1 rounded-md bg-white/10 border border-white/10\">\r\n                    <span className=\"inline-flex h-2 w-2 rounded-full bg-lime-400 mr-1.5 animate-pulse\" />\r\n                    {updatedAt ? \"Atualizado agora\" : \"Atualizando‚Ä¶\"}\r\n                  </span>\r\n                  <span className=\"text-[11px] px-2 py-1 rounded-md bg-white/10 border border-white/10\">\r\n                    {participants} participantes\r\n                  </span>\r\n                  <button\r\n                    onClick={() => fetchRanking(1)}\r\n                    className=\"text-[11px] px-2 py-1 rounded-md bg-white/10 border border-white/10 hover:bg-white/15\"\r\n                  >\r\n                    Atualizar\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              {/* Filtros simples (placeholders) */}\r\n              <div className=\"flex items-center gap-2\">\r\n                <select className=\"bg-white/10 border border-white/10 text-sm rounded-lg px-2 py-1.5\">\r\n                  <option>All-time</option>\r\n                  <option>Semana</option>\r\n                </select>\r\n                <select className=\"bg-white/10 border border-white/10 text-sm rounded-lg px-2 py-1.5\">\r\n                  <option>Global</option>\r\n                  <option>Meu curso</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            {/* P√≥dio */}\r\n            {!loading && top3.length > 0 && <Podium items={top3} />}\r\n          </motion.div>\r\n\r\n          {/* Lista/Tabela */}\r\n          <div className=\"mt-6 rounded-2xl overflow-hidden bg-white/[0.03] border border-white/10\">\r\n            <div className=\"grid grid-cols-[90px_1fr_160px_140px_180px] px-6 py-3 text-xs uppercase tracking-wide text-white/60 border-b border-white/10 sticky top-0 bg-black/50 backdrop-blur\">\r\n              <div>Posi√ß√£o</div>\r\n              <div>Usu√°rio</div>\r\n              <div>Pontos</div>\r\n              <div>Varia√ß√£o</div>\r\n              <div>√öltima atividade</div>\r\n            </div>\r\n\r\n            {loading ? (\r\n              <ul className=\"divide-y divide-white/10\">\r\n                {Array.from({ length: 6 }).map((_, i) => (\r\n                  <RankSkeletonRow key={i} />\r\n                ))}\r\n              </ul>\r\n            ) : items.length === 0 ? (\r\n              <RankEmpty />\r\n            ) : (\r\n              <ul className=\"divide-y divide-white/10\">\r\n                {items.map((u, idx) => (\r\n                  <RankRow\r\n                    key={u.user_id}\r\n                    i={idx + 1 + (page - 1) * 25}\r\n                    name={u.name}\r\n                    points={u.points}\r\n                    lastActive={u.last_completed_at}\r\n                    trend={u.trend ?? 0}\r\n                    me={currentUserIdRef.current === u.user_id}\r\n                  />\r\n                ))}\r\n              </ul>\r\n            )}\r\n\r\n            {/* Pagina√ß√£o */}\r\n            <div className=\"flex items-center justify-between px-6 py-3 border-t border-white/10\">\r\n              <button\r\n                disabled={page === 1}\r\n                onClick={() => setPage((p) => Math.max(1, p - 1))}\r\n                className=\"text-sm px-3 py-1.5 rounded-md bg-white/10 border border-white/10 disabled:opacity-40\"\r\n              >\r\n                Anterior\r\n              </button>\r\n              <div className=\"text-xs text-white/60\">\r\n                P√°gina {page} de {pages}\r\n              </div>\r\n              <button\r\n                disabled={page >= pages}\r\n                onClick={() => setPage((p) => Math.min(pages, p + 1))}\r\n                className=\"text-sm px-3 py-1.5 rounded-md bg-white/10 border border-white/10 disabled:opacity-40\"\r\n              >\r\n                Pr√≥xima\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* ======= Coluna direita: Chat ======= */}\r\n        <div className=\"min-h-[520px]\">\r\n          <ChatPanel />\r\n        </div>\r\n      </div>\r\n    </AppShell>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}