{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/lib/supabase/client.ts"],"sourcesContent":["// src/lib/supabase/client.ts\r\nimport { createClient, type SupabaseClient } from \"@supabase/supabase-js\";\r\n\r\nlet _client: SupabaseClient | null = null;\r\n\r\n/**\r\n * Cliente do Supabase para uso no browser (componentes client).\r\n * Usa storageKey custom \"sr-auth\" para evitar conflitos e manter sessão.\r\n */\r\nexport function supabaseBrowser(): SupabaseClient {\r\n  if (_client) return _client;\r\n\r\n  const url = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\n  const anon = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\r\n\r\n  if (!url || !anon) {\r\n    throw new Error(\r\n      \"Env vars ausentes: defina NEXT_PUBLIC_SUPABASE_URL e NEXT_PUBLIC_SUPABASE_ANON_KEY.\"\r\n    );\r\n  }\r\n\r\n  _client = createClient(url, anon, {\r\n    auth: {\r\n      persistSession: true,\r\n      autoRefreshToken: true,\r\n      storageKey: \"sr-auth\",\r\n    },\r\n  });\r\n\r\n  return _client;\r\n}\r\n"],"names":[],"mappings":"AAAA,6BAA6B;;;;;AAC7B;;AAEA,IAAI,UAAiC;AAM9B,SAAS;IACd,IAAI,SAAS,OAAO;IAEpB,MAAM;IACN,MAAM;IAEN;;IAMA,UAAU,IAAA,uMAAY,EAAC,KAAK,MAAM;QAChC,MAAM;YACJ,gBAAgB;YAChB,kBAAkB;YAClB,YAAY;QACd;IACF;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/app/page.tsx"],"sourcesContent":["// src/app/page.tsx\n\"use client\";\n\nimport Link from \"next/link\";\nimport { useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { supabaseBrowser } from \"@/lib/supabase/client\";\n\nexport default function Home() {\n  const router = useRouter();\n\n  useEffect(() => {\n    const supabase = supabaseBrowser();\n\n    // Escuta eventos de auth que podem acontecer ao abrir links do e-mail\n    const { data: sub } = supabase.auth.onAuthStateChange((event) => {\n      // Quando o link é de recuperação de senha\n      if (event === \"PASSWORD_RECOVERY\") {\n        const qs =\n          typeof window !== \"undefined\" && window.location.search\n            ? window.location.search\n            : \"\";\n        router.replace(`/reset-password${qs}`);\n      }\n      // Se já autenticou (ex.: magic link), manda direto pro app\n      if (event === \"SIGNED_IN\") {\n        router.replace(\"/me\");\n      }\n    });\n\n    return () => {\n      try {\n        sub.subscription.unsubscribe();\n      } catch {}\n    };\n  }, [router]);\n\n  return (\n    <main className=\"min-h-screen flex items-center justify-center\">\n      <div className=\"bg-[var(--surface)]/90 p-8 rounded-2xl shadow-lg border border-white/5 text-center\">\n        <h1 className=\"text-2xl font-semibold\">EstudoRank</h1>\n        <p className=\"mt-2 opacity-80\">Setup ok.</p>\n\n        <div className=\"mt-6 flex items-center justify-center gap-3\">\n          <Link\n            href=\"/login\"\n            className=\"px-4 py-2 rounded-lg bg-white/10 hover:bg-white/20 transition\"\n          >\n            Entrar / Criar conta\n          </Link>\n          <Link\n            href=\"/me\"\n            className=\"px-4 py-2 rounded-lg bg-white/10 hover:bg-white/20 transition\"\n          >\n            Meu painel\n          </Link>\n          <Link\n            href=\"/ranking\"\n            className=\"px-4 py-2 rounded-lg bg-white/10 hover:bg-white/20 transition\"\n          >\n            Ranking\n          </Link>\n        </div>\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":"AAAA,mBAAmB;;;;;;AAGnB;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACR,MAAM,WAAW,IAAA,mJAAe;QAEhC,sEAAsE;QACtE,MAAM,EAAE,MAAM,GAAG,EAAE,GAAG,SAAS,IAAI,CAAC,iBAAiB,CAAC,CAAC;YACrD,0CAA0C;YAC1C,IAAI,UAAU,qBAAqB;gBACjC,MAAM,KACJ,sCACI,0BACA;gBACN,OAAO,OAAO,CAAC,CAAC,eAAe,EAAE,IAAI;YACvC;YACA,2DAA2D;YAC3D,IAAI,UAAU,aAAa;gBACzB,OAAO,OAAO,CAAC;YACjB;QACF;QAEA,OAAO;YACL,IAAI;gBACF,IAAI,YAAY,CAAC,WAAW;YAC9B,EAAE,OAAM,CAAC;QACX;IACF,GAAG;QAAC;KAAO;IAEX,qBACE,8OAAC;QAAK,WAAU;kBACd,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAAyB;;;;;;8BACvC,8OAAC;oBAAE,WAAU;8BAAkB;;;;;;8BAE/B,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,uKAAI;4BACH,MAAK;4BACL,WAAU;sCACX;;;;;;sCAGD,8OAAC,uKAAI;4BACH,MAAK;4BACL,WAAU;sCACX;;;;;;sCAGD,8OAAC,uKAAI;4BACH,MAAK;4BACL,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX","debugId":null}}]
}