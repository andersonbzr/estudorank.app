{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/lib/supabase/client.ts"],"sourcesContent":["// src/lib/supabase/client.ts\r\nimport { createClient, type SupabaseClient } from \"@supabase/supabase-js\";\r\n\r\nlet _client: SupabaseClient | null = null;\r\n\r\n/**\r\n * Cliente do Supabase para uso no browser (componentes client).\r\n * Usa storageKey custom \"sr-auth\" para evitar conflitos e manter sessão.\r\n */\r\nexport function supabaseBrowser(): SupabaseClient {\r\n  if (_client) return _client;\r\n\r\n  const url = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\n  const anon = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\r\n\r\n  if (!url || !anon) {\r\n    throw new Error(\r\n      \"Env vars ausentes: defina NEXT_PUBLIC_SUPABASE_URL e NEXT_PUBLIC_SUPABASE_ANON_KEY.\"\r\n    );\r\n  }\r\n\r\n  _client = createClient(url, anon, {\r\n    auth: {\r\n      persistSession: true,\r\n      autoRefreshToken: true,\r\n      storageKey: \"sr-auth\",\r\n    },\r\n  });\r\n\r\n  return _client;\r\n}\r\n"],"names":[],"mappings":"AAAA,6BAA6B;;;;;AAYf;AAXd;;AAEA,IAAI,UAAiC;AAM9B,SAAS;IACd,IAAI,SAAS,OAAO;IAEpB,MAAM;IACN,MAAM;IAEN;;IAMA,UAAU,IAAA,0MAAY,EAAC,KAAK,MAAM;QAChC,MAAM;YACJ,gBAAgB;YAChB,kBAAkB;YAClB,YAAY;QACd;IACF;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/components/ui/Spinner.tsx"],"sourcesContent":["// src/components/ui/Spinner.tsx\r\nexport default function Spinner({ label }: { label?: string }) {\r\n  return (\r\n    <div className=\"inline-flex items-center gap-2\" role=\"status\" aria-live=\"polite\">\r\n      <svg\r\n        className=\"animate-spin h-4 w-4\"\r\n        viewBox=\"0 0 24 24\"\r\n        aria-hidden=\"true\"\r\n      >\r\n        <circle\r\n          className=\"opacity-25\"\r\n          cx=\"12\"\r\n          cy=\"12\"\r\n          r=\"10\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth=\"4\"\r\n          fill=\"none\"\r\n        />\r\n        <path\r\n          className=\"opacity-75\"\r\n          d=\"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z\"\r\n          fill=\"currentColor\"\r\n        />\r\n      </svg>\r\n      {label && <span>{label}</span>}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,gCAAgC;;;;;;;AACjB,SAAS,QAAQ,KAA6B;QAA7B,EAAE,KAAK,EAAsB,GAA7B;IAC9B,qBACE,6LAAC;QAAI,WAAU;QAAiC,MAAK;QAAS,aAAU;;0BACtE,6LAAC;gBACC,WAAU;gBACV,SAAQ;gBACR,eAAY;;kCAEZ,6LAAC;wBACC,WAAU;wBACV,IAAG;wBACH,IAAG;wBACH,GAAE;wBACF,QAAO;wBACP,aAAY;wBACZ,MAAK;;;;;;kCAEP,6LAAC;wBACC,WAAU;wBACV,GAAE;wBACF,MAAK;;;;;;;;;;;;YAGR,uBAAS,6LAAC;0BAAM;;;;;;;;;;;;AAGvB;KA1BwB","debugId":null}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/components/AuthGuard.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { supabaseBrowser } from \"@/lib/supabase/client\";\r\nimport Spinner from \"@/components/ui/Spinner\";\r\n\r\nexport default function AuthGuard({ children }: { children: React.ReactNode }) {\r\n  const [ready, setReady] = useState(false);\r\n  const [authed, setAuthed] = useState<boolean | null>(null);\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    (async () => {\r\n      const supabase = supabaseBrowser();\r\n      const { data } = await supabase.auth.getSession();\r\n      if (!isMounted) return;\r\n      setAuthed(!!data.session);\r\n      setReady(true);\r\n      if (!data.session) {\r\n        // sem sessão => manda pro login\r\n        window.location.replace(\"/login\");\r\n      }\r\n    })();\r\n    return () => { isMounted = false; };\r\n  }, []);\r\n\r\n  if (!ready) {\r\n    return (\r\n      <div className=\"min-h-[40vh] grid place-items-center\">\r\n        <Spinner label=\"Verificando sessão...\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return authed ? <>{children}</> : null;\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;;;AAHA;;;;AAKe,SAAS,UAAU,KAA2C;QAA3C,EAAE,QAAQ,EAAiC,GAA3C;;IAChC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAiB;IAErD,IAAA,0KAAS;+BAAC;YACR,IAAI,YAAY;YAChB;uCAAC;oBACC,MAAM,WAAW,AADnB,IACmB,sJAAe,AASjC;oBARC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,UAAU;oBAC/C,IAAI,CAAC,WAAW;oBAChB,UAAU,CAAC,CAAC,KAAK,OAAO;oBACxB,SAAS;oBACT,IAAI,CAAC,KAAK,OAAO,EAAE;wBACjB,gCAAgC;wBAChC,OAAO,QAAQ,CAAC,OAAO,CAAC;oBAC1B;gBACF;;YACA;uCAAO;oBAAQ,YAAY;gBAAO;;QACpC;8BAAG,EAAE;IAEL,IAAI,CAAC,OAAO;QACV,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC,iJAAO;gBAAC,OAAM;;;;;;;;;;;IAGrB;IAEA,OAAO,uBAAS;kBAAG;wBAAe;AACpC;GA7BwB;KAAA","debugId":null}},
    {"offset": {"line": 179, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/components/Sidebar.tsx"],"sourcesContent":["// src/components/Sidebar.tsx\r\n\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\nimport { Trophy, LayoutDashboard, Settings, ShieldCheck } from \"lucide-react\";\r\nimport Image from \"next/image\";\r\nimport clsx from \"clsx\";\r\n\r\ntype Props = {\r\n  onNavigate?: () => void;\r\n  isAdmin?: boolean;\r\n  /** Quando true, renderiza mini-rail (ícones apenas) no desktop */\r\n  collapsed?: boolean;\r\n};\r\n\r\ntype Item = { href: string; label: string; icon: React.ComponentType<any> };\r\n\r\nexport default function Sidebar({ onNavigate, isAdmin, collapsed = false }: Props) {\r\n  const pathname = usePathname();\r\n\r\n  const primary: Item[] = [\r\n    { href: \"/me\", label: \"Meu Painel\", icon: LayoutDashboard },\r\n    { href: \"/ranking\", label: \"Ranking\", icon: Trophy },\r\n    { href: \"/config\", label: \"Configurações\", icon: Settings },\r\n  ];\r\n\r\n  const admin: Item[] = isAdmin\r\n    ? [{ href: \"/admin/courses\", label: \"Administração\", icon: ShieldCheck }]\r\n    : [];\r\n\r\n  return (\r\n    <aside className=\"h-screen sticky top-0 bg-[var(--surface)]/80 backdrop-blur-xl border-r border-white/10 flex flex-col\">\r\n      {/* Header */}\r\n      <div\r\n        className={clsx(\r\n          \"h-14 border-b border-white/10 px-4 flex items-center gap-2\",\r\n          collapsed && \"justify-center px-0\"\r\n        )}\r\n      >\r\n        <Link\r\n          href=\"/\"\r\n          className={clsx(\r\n            \"flex items-center gap-2 transition-transform hover:scale-[1.02]\",\r\n            collapsed && \"justify-center\"\r\n          )}\r\n          onClick={onNavigate}\r\n          aria-label=\"Ir para a página inicial\"\r\n        >\r\n          <Image\r\n            src=\"/logo.png\"\r\n            alt=\"EstudoRank\"\r\n            width={collapsed ? 22 : 28}\r\n            height={collapsed ? 22 : 28}\r\n            className=\"rounded-sm drop-shadow-[0_0_6px_rgba(163,230,53,0.30)]\"\r\n            priority\r\n          />\r\n          {!collapsed && (\r\n            <span className=\"font-semibold tracking-tight\">EstudoRank</span>\r\n          )}\r\n        </Link>\r\n      </div>\r\n\r\n      {/* Navegação */}\r\n      <nav className={clsx(\"flex-1 p-2 space-y-2\", collapsed && \"p-2\")}>\r\n        <Section items={primary} collapsed={collapsed} onNavigate={onNavigate} />\r\n        {isAdmin && (\r\n          <>\r\n            {!collapsed && (\r\n              <div className=\"px-3 pt-2\">\r\n                <div className=\"h-px bg-white/10\" />\r\n              </div>\r\n            )}\r\n            <Section\r\n              title={collapsed ? undefined : \"Admin\"}\r\n              items={admin}\r\n              collapsed={collapsed}\r\n              onNavigate={onNavigate}\r\n            />\r\n          </>\r\n        )}\r\n      </nav>\r\n\r\n      {/* Footer */}\r\n      {!collapsed ? (\r\n        <div className=\"px-3 py-3 text-xs opacity-60 border-t border-white/10\">\r\n          © {new Date().getFullYear()} EstudoRank\r\n        </div>\r\n      ) : (\r\n        <div className=\"py-3 border-t border-white/10 text-center text-[10px] opacity-50 select-none\">\r\n          © {new Date().getFullYear()}\r\n        </div>\r\n      )}\r\n    </aside>\r\n  );\r\n}\r\n\r\n/* --------------------------- Subcomponentes --------------------------- */\r\n\r\nfunction Section({\r\n  title,\r\n  items,\r\n  collapsed,\r\n  onNavigate,\r\n}: {\r\n  title?: string;\r\n  items: Item[];\r\n  collapsed: boolean;\r\n  onNavigate?: () => void;\r\n}) {\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      {title && !collapsed && (\r\n        <div className=\"px-3 pt-2 text-[11px] uppercase tracking-wide text-white/40\">\r\n          {title}\r\n        </div>\r\n      )}\r\n      <ul className=\"space-y-2\">\r\n        {items.map((it) => (\r\n          <li key={it.href}>\r\n            <NavItem\r\n              item={it}\r\n              collapsed={collapsed}\r\n              onNavigate={onNavigate}\r\n            />\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction NavItem({\r\n  item,\r\n  collapsed,\r\n  onNavigate,\r\n}: {\r\n  item: Item;\r\n  collapsed: boolean;\r\n  onNavigate?: () => void;\r\n}) {\r\n  const pathname = usePathname();\r\n  const active = pathname === item.href || pathname.startsWith(`${item.href}/`);\r\n  const Icon = item.icon;\r\n\r\n  return (\r\n    <Link\r\n      href={item.href}\r\n      onClick={onNavigate}\r\n      aria-current={active ? \"page\" : undefined}\r\n      className={clsx(\r\n        \"group relative flex items-center gap-2 rounded-2xl border transition-all duration-200 outline-none focus-visible:ring-2 focus-visible:ring-lime-400/30\",\r\n        collapsed ? \"justify-center p-2\" : \"px-3 py-2\",\r\n        active\r\n          ? \"bg-white/7 border-white/15 text-lime-200 shadow-[0_0_0_1px_rgba(255,255,255,0.06)]\"\r\n          : \"bg-white/5 hover:bg-white/10 border-white/10 text-white/85 hover:text-white\"\r\n      )}\r\n    >\r\n      <Icon\r\n        size={18}\r\n        className={clsx(\"transition-transform\", active ? \"scale-[1.02]\" : \"group-hover:scale-105\")}\r\n        aria-hidden\r\n      />\r\n      {!collapsed && <span className=\"text-sm\">{item.label}</span>}\r\n\r\n      {/* Tooltip no modo colapsado */}\r\n      {collapsed && (\r\n        <span\r\n          className={clsx(\r\n            \"pointer-events-none absolute left-full ml-3 top-1/2 -translate-y-1/2\",\r\n            \"rounded-md bg-black/80 text-white text-xs px-2 py-1\",\r\n            \"opacity-0 -translate-x-1 group-hover:opacity-100 group-hover:translate-x-0\",\r\n            \"transition-all whitespace-nowrap z-50\"\r\n          )}\r\n          role=\"tooltip\"\r\n        >\r\n          {item.label}\r\n        </span>\r\n      )}\r\n    </Link>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 457, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/components/I18nProvider.tsx"],"sourcesContent":["// src/components/I18nProvider.tsx\r\n\"use client\";\r\n\r\nimport React, { createContext, useContext, useEffect, useMemo, useState } from \"react\";\r\n\r\n/**\r\n * Dicionários simples. Mantive pt-BR como padrão.\r\n * Se quiser, pode preencher/enxugar o en-US — o app vai cair no pt-BR quando faltar chave.\r\n */\r\ntype Dict = Record<string, string | ((vars?: Record<string, any>) => string)>;\r\n\r\nconst ptBR: Dict = {\r\n  // Globais / Header / Sidebar\r\n  welcome: ({ name }: any) => (name ? `Bem-vindo, ${name}` : \"Bem-vindo\"),\r\n  myPanel: \"Meu Painel\",\r\n  ranking: \"Ranking\",\r\n  settings: \"Configurações\",\r\n  admin: \"Admin\",\r\n  refresh: \"Atualizar\",\r\n  prev: \"Anterior\",\r\n  next: \"Próxima\",\r\n  signOut: \"Sair\",\r\n\r\n  // Página /me\r\n  yourPoints: \"Seus pontos:\",\r\n  creatingExample: \"Criando exemplo...\",\r\n  createExample: \"Criar dados de exemplo\",\r\n  weeklyGoalLabel: ({ done, goal }: any) => `Meta semanal (seg–dom): ${done}/${goal} módulos`,\r\n  saveGoal: \"Salvar meta\",\r\n  generalProgress: \"Progresso geral\",\r\n  modulesCompleted: ({ done, total }: any) => `${done}/${total} módulos concluídos`,\r\n  loadingCoursesModules: \"Carregando cursos e módulos...\",\r\n  noActiveCourses: \"Nenhum curso ativo. Use “Criar dados de exemplo”.\",\r\n  donePlusPoints: \"Concluído (+10 pts)\",\r\n  pending: \"Pendente\",\r\n  updating: \"Atualizando...\",\r\n  undo: \"Desfazer\",\r\n  conclude: \"Concluir\",\r\n\r\n  // Admin / Cursos\r\n  adminCoursesTitle: \"Admin • Cursos & Módulos\",\r\n  adminCoursesSubtitle:\r\n    \"Crie cursos, adicione módulos, ative/desative e edite títulos. Somente administradores podem alterar.\",\r\n  demoMode: \"Modo Demo\",\r\n  demoModeDesc: \"Popula vários cursos e módulos de exemplo.\",\r\n  populating: \"Populando...\",\r\n  populateDemo: \"Popular demo\",\r\n  newCourse: \"Novo curso\",\r\n  courseTitlePlaceholder: \"Título do curso\",\r\n  courseDescPlaceholder: \"Descrição (opcional)\",\r\n  creating: \"Criando...\",\r\n  createCourse: \"Criar curso\",\r\n  titleLabel: \"Título\",\r\n  disable: \"Desativar\",\r\n  enable: \"Ativar\",\r\n  delete: \"Excluir\",\r\n  modulePlaceholder: \"Novo módulo...\",\r\n  addModule: \"Adicionar módulo\",\r\n  adding: \"Adicionando...\",\r\n  moduleLabel: \"Módulo\",\r\n  save: \"Salvar\",\r\n  cancel: \"Cancelar\",\r\n  edit: \"Editar\",\r\n  loading: \"Carregando...\",\r\n  noCourses: \"Nenhum curso. Crie um acima.\",\r\n\r\n  // Ranking\r\n  position: \"Posição\",\r\n  user: \"Usuário\",\r\n  points: \"Pontos\",\r\n  loadingRanking: \"Carregando ranking...\",\r\n  noDataYet: \"Sem dados ainda.\",\r\n  paginationSummary: ({ total, page, pages }: any) => `${total} usuários • página ${page} de ${pages}`,\r\n};\r\n\r\nconst enUS: Dict = {\r\n  // (opcional, serve como fallback para quando você selecionar \"en-US\" no futuro)\r\n  welcome: ({ name }: any) => (name ? `Welcome, ${name}` : \"Welcome\"),\r\n  myPanel: \"My Panel\",\r\n  ranking: \"Ranking\",\r\n  settings: \"Settings\",\r\n  admin: \"Admin\",\r\n  refresh: \"Refresh\",\r\n  prev: \"Previous\",\r\n  next: \"Next\",\r\n  signOut: \"Sign out\",\r\n};\r\n\r\nexport type Locale = \"pt-BR\" | \"en-US\";\r\n\r\nconst dictionaries: Record<Locale, Dict> = {\r\n  \"pt-BR\": ptBR,\r\n  \"en-US\": enUS,\r\n};\r\n\r\ntype I18nCtxType = {\r\n  locale: Locale;\r\n  setLocale: (l: Locale) => void;\r\n  t: (key: string, vars?: Record<string, any>) => string;\r\n};\r\n\r\nconst I18nCtx = createContext<I18nCtxType | null>(null);\r\n\r\nexport function I18nProvider({ children }: { children: React.ReactNode }) {\r\n  // Se não for usar troca de idioma agora, deixe fixo em 'pt-BR'\r\n  const [locale, setLocaleState] = useState<Locale>(\"pt-BR\");\r\n\r\n  // Mantém o atributo lang coerente (não é obrigatório, mas ajuda em SEO/acessibilidade)\r\n  useEffect(() => {\r\n    document.documentElement.setAttribute(\"lang\", locale);\r\n  }, [locale]);\r\n\r\n  // Exponho setLocale para compatibilidade futura (hoje pode ficar sem uso)\r\n  const setLocale = (l: Locale) => {\r\n    setLocaleState(l);\r\n  };\r\n\r\n  // Tradutor com fallback para pt-BR e, por fim, a própria chave\r\n  const t = useMemo(() => {\r\n    return (key: string, vars?: Record<string, any>) => {\r\n      const dict = dictionaries[locale] || ptBR;\r\n      const entry = dict[key];\r\n      if (typeof entry === \"function\") return (entry as any)(vars || {});\r\n      if (typeof entry === \"string\") return entry;\r\n\r\n      const fb = ptBR[key];\r\n      if (typeof fb === \"function\") return (fb as any)(vars || {});\r\n      if (typeof fb === \"string\") return fb;\r\n\r\n      return key;\r\n    };\r\n  }, [locale]);\r\n\r\n  const value = useMemo(() => ({ locale, setLocale, t }), [locale, t]);\r\n\r\n  return <I18nCtx.Provider value={value}>{children}</I18nCtx.Provider>;\r\n}\r\n\r\nexport function useI18n() {\r\n  const ctx = useContext(I18nCtx);\r\n  if (!ctx) throw new Error(\"useI18n must be used within I18nProvider\");\r\n  return ctx;\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 634, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/components/shell/AppShell.tsx"],"sourcesContent":["// src/components/shell/AppShell.tsx\r\n\"use client\";\r\n\r\nimport { ReactNode, useEffect, useState, Fragment } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { useRouter, usePathname } from \"next/navigation\";\r\nimport Sidebar from \"@/components/Sidebar\";\r\nimport { supabaseBrowser } from \"@/lib/supabase/client\";\r\nimport { I18nProvider } from \"@/components/I18nProvider\";\r\nimport { Menu as UiMenu, Transition } from \"@headlessui/react\";\r\nimport clsx from \"clsx\";\r\nimport { Menu, ShieldCheck, LogOut } from \"lucide-react\";\r\n\r\n/** Mapeia pathname -> título do header */\r\nconst titleMap: Record<string, string> = {\r\n  \"/me\": \"Meu Painel\",\r\n  \"/ranking\": \"Ranking\",\r\n  \"/config\": \"Configurações\",\r\n  \"/me/security\": \"Segurança\",\r\n  \"/admin/courses\": \"Administração\",\r\n};\r\n\r\nexport default function AppShell({ children }: { children: ReactNode }) {\r\n  /** layout */\r\n  const [open, setOpen] = useState(true); // desktop: aberta/rail\r\n  const [mobileOpen, setMobileOpen] = useState(false);\r\n\r\n  /** usuário */\r\n  const [displayName, setDisplayName] = useState<string | null>(null);\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n\r\n  useEffect(() => {\r\n    const supabase = supabaseBrowser();\r\n    supabase.auth.getUser().then(async ({ data }) => {\r\n      const u = data.user;\r\n      if (!u) {\r\n        setIsAdmin(false);\r\n        setDisplayName(null);\r\n        return;\r\n      }\r\n      const { data: prof } = await supabase\r\n        .from(\"profiles\")\r\n        .select(\"is_admin, full_name, name\")\r\n        .eq(\"id\", u.id)\r\n        .single();\r\n      setIsAdmin(!!prof?.is_admin);\r\n      const name =\r\n        (prof?.full_name && String(prof.full_name).trim()) ||\r\n        (prof?.name && String(prof.name).trim()) ||\r\n        u.email ||\r\n        null;\r\n      setDisplayName(name);\r\n    });\r\n  }, []);\r\n\r\n  async function signOut() {\r\n    const supabase = supabaseBrowser();\r\n    await supabase.auth.signOut();\r\n    router.replace(\"/login\");\r\n  }\r\n\r\n  function handleNavigate() {\r\n    setMobileOpen(false);\r\n  }\r\n\r\n  const desktopCol = open ? \"18rem\" : \"4rem\";\r\n  const headerTitle =\r\n    titleMap[pathname] ??\r\n    (pathname?.startsWith(\"/u/\") ? \"Perfil\" : \"EstudoRank\");\r\n\r\n  const initial =\r\n    (displayName?.trim()?.charAt(0)?.toUpperCase() as string) || \"U\";\r\n\r\n  return (\r\n    <I18nProvider>\r\n      <div\r\n        className=\"min-h-screen w-full grid\"\r\n        style={{ gridTemplateColumns: `${desktopCol} 1fr` }}\r\n      >\r\n        {/* Sidebar Desktop */}\r\n        <div className=\"hidden lg:block border-r border-white/10 bg-[var(--surface)]/70 backdrop-blur-xl\">\r\n          <Sidebar isAdmin={isAdmin} collapsed={!open} />\r\n        </div>\r\n\r\n        {/* Conteúdo */}\r\n        <div className=\"min-h-screen flex flex-col\">\r\n          {/* Topbar */}\r\n          <header className=\"sticky top-0 z-30 h-14 border-b border-white/10 bg-[var(--surface)]/70 backdrop-blur flex items-center justify-between px-3 sm:px-4 lg:px-6\">\r\n            <div className=\"flex items-center gap-2\">\r\n              {/* Toggle Mobile Drawer */}\r\n              <button\r\n                className=\"btn-icon lg:hidden\"\r\n                onClick={() => setMobileOpen(true)}\r\n                aria-label=\"Abrir menu\"\r\n              >\r\n                <Menu size={18} />\r\n              </button>\r\n\r\n              {/* Toggle largura sidebar (desktop) */}\r\n              <button\r\n                className=\"btn-icon hidden lg:inline-flex\"\r\n                onClick={() => setOpen((v) => !v)}\r\n                aria-label={open ? \"Recolher menu\" : \"Expandir menu\"}\r\n                title={open ? \"Recolher menu\" : \"Expandir menu\"}\r\n              >\r\n                <Menu size={18} />\r\n              </button>\r\n\r\n              {/* Título da página */}\r\n              <span className=\"text-sm opacity-90 font-medium\">\r\n                {headerTitle}\r\n              </span>\r\n            </div>\r\n\r\n            {/* Menu do usuário (apenas Administração + Sair) */}\r\n            <UiMenu as=\"div\" className=\"relative\">\r\n              <UiMenu.Button className=\"inline-flex items-center gap-2 rounded-lg border border-white/10 bg-white/5 px-2.5 h-9 hover:bg-white/10 transition\">\r\n                <span className=\"inline-grid place-items-center h-6 w-6 rounded-full bg-white/10 border border-white/15 text-xs\">\r\n                  {initial}\r\n                </span>\r\n                <span className=\"max-w-[160px] truncate text-sm\">\r\n                  {displayName ?? \"Conta\"}\r\n                </span>\r\n                <svg\r\n                  aria-hidden\r\n                  width=\"16\"\r\n                  height=\"16\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  className=\"opacity-70\"\r\n                >\r\n                  <path\r\n                    fill=\"currentColor\"\r\n                    d=\"M7 10l5 5 5-5z\"\r\n                  />\r\n                </svg>\r\n              </UiMenu.Button>\r\n\r\n              <Transition\r\n                as={Fragment}\r\n                enter=\"transition ease-out duration-120\"\r\n                enterFrom=\"opacity-0 translate-y-1\"\r\n                enterTo=\"opacity-100 translate-y-0\"\r\n                leave=\"transition ease-in duration-100\"\r\n                leaveFrom=\"opacity-100 translate-y-0\"\r\n                leaveTo=\"opacity-0 translate-y-1\"\r\n              >\r\n                <UiMenu.Items className=\"absolute right-0 mt-2 w-56 origin-top-right rounded-xl border border-white/10 bg-[var(--surface)]/98 backdrop-blur shadow-2xl focus:outline-none p-1\">\r\n                  {isAdmin && (\r\n                    <UiMenu.Item>\r\n                      {({ active }) => (\r\n                        <Link\r\n                          href=\"/admin/courses\"\r\n                          className={clsx(\r\n                            \"flex items-center gap-2 rounded-lg px-3 py-2 text-sm\",\r\n                            active ? \"bg-white/10\" : \"bg-transparent\"\r\n                          )}\r\n                        >\r\n                          <ShieldCheck size={16} className=\"text-lime-300\" />\r\n                          Administração\r\n                        </Link>\r\n                      )}\r\n                    </UiMenu.Item>\r\n                  )}\r\n\r\n                  <div className=\"my-1 h-px bg-white/10\" />\r\n\r\n                  <UiMenu.Item>\r\n                    {({ active }) => (\r\n                      <button\r\n                        onClick={signOut}\r\n                        className={clsx(\r\n                          \"w-full flex items-center gap-2 rounded-lg px-3 py-2 text-left text-sm\",\r\n                          active ? \"bg-white/10\" : \"bg-transparent\"\r\n                        )}\r\n                      >\r\n                        <LogOut size={16} />\r\n                        Sair\r\n                      </button>\r\n                    )}\r\n                  </UiMenu.Item>\r\n                </UiMenu.Items>\r\n              </Transition>\r\n            </UiMenu>\r\n          </header>\r\n\r\n          <main className=\"flex-1 p-4 sm:p-6 lg:p-8\">{children}</main>\r\n        </div>\r\n\r\n        {/* Drawer Mobile */}\r\n        {mobileOpen && (\r\n          <div className=\"lg:hidden fixed inset-0 z-40\">\r\n            {/* overlay */}\r\n            <button\r\n              className=\"absolute inset-0 bg-black/50\"\r\n              onClick={() => setMobileOpen(false)}\r\n              aria-label=\"Fechar menu\"\r\n            />\r\n            <div className=\"absolute left-0 top-0 h-full w-72 bg-[var(--surface)]/90 border-r border-white/10 shadow-xl\">\r\n              <Sidebar isAdmin={isAdmin} onNavigate={handleNavigate} />\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </I18nProvider>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1010, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/components/ui/MotionButton.tsx"],"sourcesContent":["// src/components/ui/MotionButton.tsx\r\n\"use client\";\r\n\r\nimport { motion } from \"framer-motion\";\r\nimport { ButtonHTMLAttributes } from \"react\";\r\n\r\nexport default function MotionButton(\r\n  props: ButtonHTMLAttributes<HTMLButtonElement>\r\n) {\r\n  const { className = \"\", ...rest } = props;\r\n  return (\r\n    <motion.button\r\n      whileTap={{ scale: 0.98 }}\r\n      whileHover={{ scale: 1.01 }}\r\n      transition={{ duration: 0.08 }}\r\n      className={`px-3 py-2 rounded-xl bg-white/10 hover:bg-white/20 transition disabled:opacity-60 ${className}`}\r\n      {...rest}\r\n    />\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,qCAAqC;;;;;;AAGrC;AAFA;;;AAKe,SAAS,aACtB,KAA8C;IAE9C,MAAM,EAAE,YAAY,EAAE,EAAE,GAAG,MAAM,GAAG;IACpC,qBACE,6LAAC,uMAAM,CAAC,MAAM;QACZ,UAAU;YAAE,OAAO;QAAK;QACxB,YAAY;YAAE,OAAO;QAAK;QAC1B,YAAY;YAAE,UAAU;QAAK;QAC7B,WAAW,AAAC,qFAA8F,OAAV;QAC/F,GAAG,IAAI;;;;;;AAGd;KAbwB","debugId":null}},
    {"offset": {"line": 1050, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/app/curso/%5Bid%5D/page.tsx"],"sourcesContent":["// src/app/curso/[id]/page.tsx\r\n\"use client\";\r\n\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { supabaseBrowser } from \"@/lib/supabase/client\";\r\nimport { useToast } from \"@/components/Toast\";\r\nimport AuthGuard from \"@/components/AuthGuard\";\r\nimport AppShell from \"@/components/shell/AppShell\";\r\nimport MotionButton from \"@/components/ui/MotionButton\";\r\nimport { motion, useSpring, useTransform } from \"framer-motion\";\r\nimport { ArrowLeft, CheckCircle2, Circle, Trophy } from \"lucide-react\";\r\n\r\n/* Tipos */\r\ntype Module = {\r\n  id: string;\r\n  course_id: string;\r\n  title: string;\r\n  sort_order: number;\r\n  is_active?: boolean;\r\n};\r\ntype Prog = {\r\n  id?: string;\r\n  user_id: string;\r\n  module_id: string;\r\n  completed: boolean;\r\n  points: number | null;\r\n  completed_at: string | null;\r\n};\r\n\r\n/* Config */\r\nconst POINTS_PER_MODULE = 10;\r\n\r\n/* Donut reutilizável (mini) */\r\nfunction Donut({\r\n  value,\r\n  size = 120,\r\n  stroke = 10,\r\n}: {\r\n  value: number;\r\n  size?: number;\r\n  stroke?: number;\r\n}) {\r\n  const radius = (size - stroke) / 2;\r\n  const circumference = 2 * Math.PI * radius;\r\n  const progress = useSpring(0, { stiffness: 60, damping: 15 });\r\n  const dash = useTransform(\r\n    progress,\r\n    (v) => circumference - (v / 100) * circumference\r\n  );\r\n  useEffect(() => {\r\n    progress.set(value);\r\n  }, [value, progress]);\r\n\r\n  return (\r\n    <div className=\"relative\" style={{ width: size, height: size }}>\r\n      <svg className=\"-rotate-90\" width={size} height={size}>\r\n        <defs>\r\n          <linearGradient id=\"gradCourse\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n            <stop offset=\"0%\" stopColor=\"#a3e635\" />\r\n            <stop offset=\"100%\" stopColor=\"#bef264\" />\r\n          </linearGradient>\r\n        </defs>\r\n        <circle\r\n          stroke=\"rgba(255,255,255,0.08)\"\r\n          fill=\"none\"\r\n          strokeWidth={stroke}\r\n          r={radius}\r\n          cx={size / 2}\r\n          cy={size / 2}\r\n        />\r\n        <motion.circle\r\n          stroke=\"url(#gradCourse)\"\r\n          fill=\"none\"\r\n          strokeWidth={stroke}\r\n          strokeLinecap=\"round\"\r\n          r={radius}\r\n          cx={size / 2}\r\n          cy={size / 2}\r\n          strokeDasharray={circumference}\r\n          style={{\r\n            strokeDashoffset: dash,\r\n            filter: \"drop-shadow(0 0 8px rgba(163,230,53,0.4))\",\r\n          }}\r\n        />\r\n      </svg>\r\n      <div className=\"absolute inset-0 flex flex-col items-center justify-center\">\r\n        <motion.span\r\n          key={`pct-${value}`}\r\n          initial={{ scale: 0.95 }}\r\n          animate={{ scale: [0.95, 1.06, 1] }}\r\n          transition={{ duration: 0.45 }}\r\n          className=\"text-2xl font-semibold text-lime-300\"\r\n        >\r\n          {Math.round(value)}%\r\n        </motion.span>\r\n        <span className=\"text-[11px] text-white/50\">progresso</span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* Confetti */\r\nasync function fireConfetti() {\r\n  const confetti = (await import(\"canvas-confetti\")).default;\r\n  await confetti({\r\n    particleCount: 70,\r\n    spread: 60,\r\n    startVelocity: 42,\r\n    origin: { y: 0.6 },\r\n  });\r\n}\r\n\r\nexport default function CursoPage() {\r\n  return (\r\n    <AuthGuard>\r\n      <AppShell>\r\n        <Content />\r\n      </AppShell>\r\n    </AuthGuard>\r\n  );\r\n}\r\n\r\nfunction Content() {\r\n  const params = useParams();\r\n  const id = Array.isArray(params?.id) ? params.id[0] : (params?.id as string);\r\n  const router = useRouter();\r\n  const supabase = useMemo(() => supabaseBrowser(), []);\r\n  const toast = useToast();\r\n\r\n  const [uid, setUid] = useState<string | null>(null);\r\n\r\n  const [courseTitle, setCourseTitle] = useState(\"\");\r\n  const [modules, setModules] = useState<Module[]>([]);\r\n  const [progress, setProgress] = useState<Map<string, Prog>>(new Map());\r\n  const [loading, setLoading] = useState(true);\r\n  const [busy, setBusy] = useState<string | null>(null);\r\n  const [pulse, setPulse] = useState(0);\r\n  const [err, setErr] = useState<string | null>(null);\r\n\r\n  // 1) Quem é o usuário?\r\n  useEffect(() => {\r\n    supabase.auth.getUser().then(({ data }) => setUid(data.user?.id ?? null));\r\n  }, [supabase]);\r\n\r\n  // 2) Carrega dados do curso + módulos + progresso DO USUÁRIO\r\n  useEffect(() => {\r\n    if (!uid) return; // espera saber quem é o user\r\n    if (!id) return;\r\n\r\n    let cancelled = false;\r\n\r\n    async function load() {\r\n      setLoading(true);\r\n      setErr(null);\r\n\r\n      try {\r\n        const [c1, m1] = await Promise.all([\r\n          supabase.from(\"courses\").select(\"title\").eq(\"id\", id).maybeSingle(),\r\n          supabase\r\n            .from(\"modules\")\r\n            .select(\"id, course_id, title, sort_order, is_active\")\r\n            .eq(\"course_id\", id)\r\n            .eq(\"is_active\", true)\r\n            .order(\"sort_order\", { ascending: true }),\r\n        ]);\r\n\r\n        if (c1.error) throw c1.error;\r\n        if (!c1.data) throw new Error(\"Curso não encontrado.\");\r\n\r\n        const mods = (m1.data as Module[]) ?? [];\r\n        const modIds = mods.map((m) => m.id);\r\n\r\n        // progresso APENAS do usuário logado\r\n        let progMap = new Map<string, Prog>();\r\n        if (modIds.length) {\r\n          const { data: pRows, error: pErr } = await supabase\r\n            .from(\"progress\")\r\n            .select(\"id,user_id,module_id,completed,points,completed_at\")\r\n            .eq(\"user_id\", uid)\r\n            .in(\"module_id\", modIds);\r\n\r\n          if (pErr) throw pErr;\r\n\r\n          for (const p of (pRows as Prog[]) ?? []) {\r\n            progMap.set(p.module_id, p);\r\n          }\r\n        }\r\n\r\n        if (!cancelled) {\r\n          setCourseTitle(c1.data.title);\r\n          setModules(mods);\r\n          setProgress(progMap);\r\n        }\r\n      } catch (e: any) {\r\n        if (!cancelled) setErr(e?.message || \"Falha ao carregar o curso.\");\r\n      } finally {\r\n        if (!cancelled) setLoading(false);\r\n      }\r\n    }\r\n\r\n    load();\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, [supabase, uid, id]);\r\n\r\n  // Índices rápidos\r\n  const doneCount = useMemo(\r\n    () => modules.filter((m) => progress.get(m.id)?.completed).length,\r\n    [modules, progress]\r\n  );\r\n  const percent = useMemo(() => {\r\n    const total = modules.length || 1;\r\n    return Math.round((doneCount / total) * 100);\r\n  }, [modules.length, doneCount]);\r\n\r\n  const coursePoints = useMemo(\r\n    () =>\r\n      modules.reduce(\r\n        (acc, m) => acc + (progress.get(m.id)?.points ?? 0),\r\n        0\r\n      ),\r\n    [modules, progress]\r\n  );\r\n\r\n  async function toggleModule(moduleId: string) {\r\n    if (!uid) return;\r\n    setBusy(moduleId);\r\n\r\n    const current = progress.get(moduleId);\r\n    const willComplete = !(current?.completed ?? false);\r\n\r\n    try {\r\n      if (!current) {\r\n        // INSERT — cria registro só para ESTE usuário\r\n        const { data, error } = await supabase\r\n          .from(\"progress\")\r\n          .insert([\r\n            {\r\n              user_id: uid,\r\n              module_id: moduleId,\r\n              completed: true,\r\n              points: POINTS_PER_MODULE,\r\n              completed_at: new Date().toISOString(),\r\n            },\r\n          ])\r\n          .select(\"id,user_id,module_id,completed,points,completed_at\")\r\n          .single();\r\n        if (error) throw error;\r\n\r\n        // otimista\r\n        setProgress((prev) => {\r\n          const next = new Map(prev);\r\n          next.set(moduleId, data as Prog);\r\n          return next;\r\n        });\r\n\r\n        toast.push(`+${POINTS_PER_MODULE} pts adicionados`);\r\n        setPulse((p) => p + 1);\r\n\r\n        const allDone = modules.every((m) =>\r\n          m.id === moduleId ? true : !!progress.get(m.id)?.completed\r\n        );\r\n        if (allDone) {\r\n          fireConfetti();\r\n          toast.push(\"🎉 Curso concluído!\");\r\n        }\r\n      } else {\r\n        // UPDATE — só do próprio usuário\r\n        const { data, error } = await supabase\r\n          .from(\"progress\")\r\n          .update({\r\n            completed: willComplete,\r\n            points: willComplete ? POINTS_PER_MODULE : 0,\r\n            completed_at: willComplete ? new Date().toISOString() : null,\r\n          })\r\n          .eq(\"id\", current.id)\r\n          .eq(\"user_id\", uid) // garante que só atualiza do próprio user\r\n          .select(\"id,user_id,module_id,completed,points,completed_at\")\r\n          .single();\r\n\r\n        if (error) throw error;\r\n\r\n        setProgress((prev) => {\r\n          const next = new Map(prev);\r\n          next.set(moduleId, data as Prog);\r\n          return next;\r\n        });\r\n\r\n        toast.push(\r\n          willComplete\r\n            ? `+${POINTS_PER_MODULE} pts adicionados`\r\n            : `-${POINTS_PER_MODULE} pts removidos`\r\n        );\r\n        setPulse((p) => p + 1);\r\n\r\n        if (willComplete) {\r\n          const allDone = modules.every((m) =>\r\n            m.id === moduleId ? true : !!progress.get(m.id)?.completed\r\n          );\r\n          if (allDone) {\r\n            fireConfetti();\r\n            toast.push(\"🎉 Curso concluído!\");\r\n          }\r\n        }\r\n      }\r\n    } catch (e: any) {\r\n      toast.push(e?.message ?? \"Erro ao atualizar módulo\");\r\n      // rollback fino: recarrega apenas aquele registro do server\r\n      const { data: pRow } = await supabase\r\n        .from(\"progress\")\r\n        .select(\"id,user_id,module_id,completed,points,completed_at\")\r\n        .eq(\"user_id\", uid)\r\n        .eq(\"module_id\", moduleId)\r\n        .maybeSingle();\r\n      setProgress((prev) => {\r\n        const next = new Map(prev);\r\n        if (pRow) next.set(moduleId, pRow as Prog);\r\n        else next.delete(moduleId);\r\n        return next;\r\n      });\r\n    } finally {\r\n      setBusy(null);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto px-5 md:px-8 py-10\">\r\n      {/* Back */}\r\n      <button\r\n        onClick={() => router.back()}\r\n        className=\"mb-6 inline-flex items-center gap-2 text-white/70 hover:text-white transition\"\r\n      >\r\n        <ArrowLeft size={18} />\r\n        Voltar\r\n      </button>\r\n\r\n      {/* Header do curso com mini-dashboard */}\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 8 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        className=\"relative overflow-hidden rounded-2xl p-7 bg-gradient-to-b from-neutral-900 to-black shadow-[inset_0_0_0_1px_rgba(255,255,255,0.05)]\"\r\n      >\r\n        {loading ? (\r\n          <div className=\"h-20 animate-pulse bg-white/5 rounded-lg\" />\r\n        ) : err ? (\r\n          <div className=\"text-sm text-red-300\">{err}</div>\r\n        ) : (\r\n          <div className=\"flex items-center justify-between gap-6 flex-wrap\">\r\n            <div className=\"min-w-[220px]\">\r\n              <h1 className=\"text-2xl md:text-3xl font-semibold text-white/90\">\r\n                {courseTitle || \"Curso\"}\r\n              </h1>\r\n              <div className=\"mt-2 flex items-center gap-2 text-white/70\">\r\n                <Trophy size={18} className=\"text-lime-300\" />\r\n                <motion.span\r\n                  key={`pts-${pulse}-${coursePoints}`}\r\n                  initial={{ scale: 1 }}\r\n                  animate={{ scale: [1, 1.06, 1] }}\r\n                  transition={{ duration: 0.4 }}\r\n                  className=\"font-medium\"\r\n                >\r\n                  {coursePoints} pts no curso\r\n                </motion.span>\r\n              </div>\r\n              <div className=\"text-xs text-white/50 mt-1\">\r\n                {doneCount}/{modules.length || 0} módulos concluídos\r\n              </div>\r\n            </div>\r\n\r\n            <motion.div\r\n              key={`donut-${pulse}-${percent}`}\r\n              initial={{ scale: 0.95, opacity: 0.9 }}\r\n              animate={{ scale: [0.95, 1.05, 1], opacity: [0.9, 1, 1] }}\r\n              transition={{ duration: 0.5 }}\r\n              className=\"flex items-center gap-4\"\r\n            >\r\n              <Donut value={percent} />\r\n            </motion.div>\r\n          </div>\r\n        )}\r\n      </motion.div>\r\n\r\n      {/* Lista de módulos */}\r\n      <div className=\"mt-8\">\r\n        {loading ? (\r\n          <div className=\"text-sm text-white/60\">Carregando módulos…</div>\r\n        ) : modules.length === 0 ? (\r\n          <div className=\"text-sm text-white/60\">\r\n            Nenhum módulo encontrado.\r\n          </div>\r\n        ) : (\r\n          <ul className=\"divide-y divide-white/10 rounded-xl overflow-hidden bg-white/[0.03] border border-white/10\">\r\n            {modules.map((m) => {\r\n              const st = progress.get(m.id);\r\n              const done = !!st?.completed;\r\n              const busyHere = busy === m.id;\r\n\r\n              return (\r\n                <li\r\n                  key={m.id}\r\n                  className=\"flex items-center justify-between px-5 py-4 hover:bg-white/[0.04] transition\"\r\n                >\r\n                  <div className=\"flex items-center gap-3 min-w-0\">\r\n                    {done ? (\r\n                      <CheckCircle2 size={18} className=\"text-lime-300\" />\r\n                    ) : (\r\n                      <Circle size={18} className=\"opacity-50\" />\r\n                    )}\r\n                    <div className=\"truncate\">\r\n                      <div\r\n                        className={`font-medium truncate ${\r\n                          done ? \"text-white/60 line-through\" : \"text-white/90\"\r\n                        }`}\r\n                      >\r\n                        {m.title}\r\n                      </div>\r\n                      <div className=\"text-xs text-white/50\">\r\n                        {done\r\n                          ? `Concluído (+${POINTS_PER_MODULE} pts)`\r\n                          : \"Pendente\"}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <MotionButton\r\n                    onClick={() => toggleModule(m.id)}\r\n                    disabled={busyHere || !uid}\r\n                    aria-busy={busyHere}\r\n                    className={`px-3 py-1.5 rounded-lg text-xs transition-all ${\r\n                      busyHere\r\n                        ? \"bg-white/5 text-white/50\"\r\n                        : done\r\n                        ? \"bg-white/5 text-white/60 hover:bg-white/10\"\r\n                        : \"bg-lime-400/10 text-lime-300 hover:bg-lime-400/20\"\r\n                    }`}\r\n                  >\r\n                    {busyHere ? \"Atualizando...\" : done ? \"Desfazer\" : \"Concluir\"}\r\n                  </MotionButton>\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}