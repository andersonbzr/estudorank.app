{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/lib/supabase/client.ts"],"sourcesContent":["// src/lib/supabase/client.ts\r\nimport { createClient, type SupabaseClient } from \"@supabase/supabase-js\";\r\n\r\nlet _client: SupabaseClient | null = null;\r\n\r\n/**\r\n * Cliente do Supabase para uso no browser (componentes client).\r\n * Usa storageKey custom \"sr-auth\" para evitar conflitos e manter sessão.\r\n */\r\nexport function supabaseBrowser(): SupabaseClient {\r\n  if (_client) return _client;\r\n\r\n  const url = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\n  const anon = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\r\n\r\n  if (!url || !anon) {\r\n    throw new Error(\r\n      \"Env vars ausentes: defina NEXT_PUBLIC_SUPABASE_URL e NEXT_PUBLIC_SUPABASE_ANON_KEY.\"\r\n    );\r\n  }\r\n\r\n  _client = createClient(url, anon, {\r\n    auth: {\r\n      persistSession: true,\r\n      autoRefreshToken: true,\r\n      storageKey: \"sr-auth\",\r\n    },\r\n  });\r\n\r\n  return _client;\r\n}\r\n"],"names":[],"mappings":"AAAA,6BAA6B;;;;;AAYf;AAXd;;AAEA,IAAI,UAAiC;AAM9B,SAAS;IACd,IAAI,SAAS,OAAO;IAEpB,MAAM;IACN,MAAM;IAEN;;IAMA,UAAU,IAAA,0MAAY,EAAC,KAAK,MAAM;QAChC,MAAM;YACJ,gBAAgB;YAChB,kBAAkB;YAClB,YAAY;QACd;IACF;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adsli/EstudoRank-patched-2025-10-22/estudorank/src/app/page.tsx"],"sourcesContent":["// src/app/page.tsx\r\n\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { supabaseBrowser } from \"@/lib/supabase/client\";\r\n\r\nexport default function Home() {\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const supabase = supabaseBrowser();\r\n\r\n    // Escuta eventos de auth que podem acontecer ao abrir links do e-mail\r\n    const { data: sub } = supabase.auth.onAuthStateChange((event) => {\r\n      // Quando o link é de recuperação de senha\r\n      if (event === \"PASSWORD_RECOVERY\") {\r\n        const qs =\r\n          typeof window !== \"undefined\" && window.location.search\r\n            ? window.location.search\r\n            : \"\";\r\n        router.replace(`/reset-password${qs}`);\r\n      }\r\n      // Se já autenticou (ex.: magic link), manda direto pro app\r\n      if (event === \"SIGNED_IN\") {\r\n        router.replace(\"/me\");\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      try {\r\n        sub.subscription.unsubscribe();\r\n      } catch {}\r\n    };\r\n  }, [router]);\r\n\r\n  return (\r\n    <main className=\"min-h-screen flex items-center justify-center\">\r\n      <div className=\"bg-[var(--surface)]/90 p-8 rounded-2xl shadow-lg border border-white/5 text-center\">\r\n        <h1 className=\"text-2xl font-semibold\">EstudoRank</h1>\r\n        <p className=\"mt-2 opacity-80\">Setup ok.</p>\r\n\r\n        <div className=\"mt-6 flex items-center justify-center gap-3\">\r\n          <Link\r\n            href=\"/login\"\r\n            className=\"px-4 py-2 rounded-lg bg-white/10 hover:bg-white/20 transition\"\r\n          >\r\n            Entrar / Criar conta\r\n          </Link>\r\n          <Link\r\n            href=\"/me\"\r\n            className=\"px-4 py-2 rounded-lg bg-white/10 hover:bg-white/20 transition\"\r\n          >\r\n            Meu painel\r\n          </Link>\r\n          <Link\r\n            href=\"/ranking\"\r\n            className=\"px-4 py-2 rounded-lg bg-white/10 hover:bg-white/20 transition\"\r\n          >\r\n            Ranking\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,mBAAmB;;;;;;AAGnB;AACA;AACA;AACA;;;AALA;;;;;AAOe,SAAS;;IACtB,MAAM,SAAS,IAAA,kJAAS;IAExB,IAAA,0KAAS;0BAAC;YACR,MAAM,WAAW,IAAA,sJAAe;YAEhC,sEAAsE;YACtE,MAAM,EAAE,MAAM,GAAG,EAAE,GAAG,SAAS,IAAI,CAAC,iBAAiB;kCAAC,CAAC;oBACrD,0CAA0C;oBAC1C,IAAI,UAAU,qBAAqB;wBACjC,MAAM,KACJ,aAAkB,eAAe,OAAO,QAAQ,CAAC,MAAM,GACnD,OAAO,QAAQ,CAAC,MAAM,GACtB;wBACN,OAAO,OAAO,CAAC,AAAC,kBAAoB,OAAH;oBACnC;oBACA,2DAA2D;oBAC3D,IAAI,UAAU,aAAa;wBACzB,OAAO,OAAO,CAAC;oBACjB;gBACF;;YAEA;kCAAO;oBACL,IAAI;wBACF,IAAI,YAAY,CAAC,WAAW;oBAC9B,EAAE,UAAM,CAAC;gBACX;;QACF;yBAAG;QAAC;KAAO;IAEX,qBACE,6LAAC;QAAK,WAAU;kBACd,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAAyB;;;;;;8BACvC,6LAAC;oBAAE,WAAU;8BAAkB;;;;;;8BAE/B,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,0KAAI;4BACH,MAAK;4BACL,WAAU;sCACX;;;;;;sCAGD,6LAAC,0KAAI;4BACH,MAAK;4BACL,WAAU;sCACX;;;;;;sCAGD,6LAAC,0KAAI;4BACH,MAAK;4BACL,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX;GA1DwB;;QACP,kJAAS;;;KADF","debugId":null}}]
}